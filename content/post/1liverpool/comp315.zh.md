---
title: "äº‘è®¡ç®—(COMP315)"
date: 2024-02-26T17:39:49Z
draft: false
author: "Martin"
tags: 
- äº‘è®¡ç®—
description: ""
weight: # è¾“å…¥1å¯ä»¥é¡¶ç½®æ–‡ç« ï¼Œç”¨æ¥ç»™æ–‡ç« å±•ç¤ºæ’åºï¼Œä¸å¡«å°±é»˜è®¤æŒ‰æ—¶é—´æ’åº
slug: "comp315"
comments: true
showToc: true # æ˜¾ç¤ºç›®å½•
TocOpen: true # è‡ªåŠ¨å±•å¼€ç›®å½•
hidemeta: false # æ˜¯å¦éšè—æ–‡ç« çš„å…ƒä¿¡æ¯ï¼Œå¦‚å‘å¸ƒæ—¥æœŸã€ä½œè€…ç­‰
disableShare: true # åº•éƒ¨ä¸æ˜¾ç¤ºåˆ†äº«æ 
showbreadcrumbs: true #é¡¶éƒ¨æ˜¾ç¤ºå½“å‰è·¯å¾„
cover:
    image: ""
    caption: ""
    alt: ""
    relative: false
mermaid: true
---
# è™šæ‹Ÿæœº
> å€ŸåŠ©è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œç”¨æˆ·èƒ½ä»¥å•ä¸ªç‰©ç†ç¡¬ä»¶ç³»ç»Ÿä¸ºåŸºç¡€åˆ›å»ºå¤šä¸ªæ¨¡æ‹Ÿç¯å¢ƒæˆ–ä¸“ç”¨èµ„æºã€‚"Hypervisor" ï¼ˆè™šæ‹Ÿæœºç›‘æ§ç¨‹åºï¼‰çš„è½¯ä»¶å¯ç›´æ¥è¿æ¥åˆ°ç¡¬ä»¶ï¼Œä»è€Œå°†ä¸€ä¸ªç³»ç»Ÿåˆ’åˆ†ä¸ºä¸åŒçš„ã€å•ç‹¬å®‰å…¨ç¯å¢ƒï¼Œå³è™šæ‹Ÿæœºï¼ˆVMï¼‰ã€‚

## Type 1 & Type 2 è™šæ‹Ÿæœºç›‘æ§ç¨‹åº
ç¬¬ 1 ç±»è™šæ‹Ÿæœºç›‘æ§å™¨ä½äºè£¸æœºæœåŠ¡å™¨ä¹‹ä¸Šï¼Œå¯ä»¥ç›´æ¥è®¿é—®ç¡¬ä»¶èµ„æºã€‚å› æ­¤ï¼Œç¬¬ 1 ç±»è™šæ‹Ÿæœºç›‘æ§å™¨ä¹Ÿç§°ä¸ºè£¸æœºè™šæ‹Ÿæœºç›‘æ§å™¨ã€‚

ç›¸æ¯”ä¹‹ä¸‹ï¼Œç¬¬ 2 ç±»è™šæ‹Ÿæœºç›‘æ§å™¨æ˜¯å®‰è£…åœ¨ä¸»æœºæ“ä½œç³»ç»Ÿä¸Šçš„åº”ç”¨ç¨‹åºã€‚æ­¤ç±»è™šæ‹Ÿæœºç›‘æ§å™¨ä¹Ÿç§°ä¸ºæ‰˜ç®¡æˆ–åµŒå…¥å¼è™šæ‹Ÿæœºç›‘æ§å™¨ã€‚

- ç¬¬ 1 ç±»è™šæ‹Ÿæœºç›‘æ§å™¨æˆ–è£¸æœºè™šæ‹Ÿæœºç›‘æ§å™¨ç›´æ¥ä¸åº•å±‚è®¡ç®—æœºç¡¬ä»¶äº¤äº’ã€‚è£¸æœºè™šæ‹Ÿæœºç›‘æ§å™¨ç›´æ¥å®‰è£…åœ¨ä¸»æœºçš„ç‰©ç†ç¡¬ä»¶ä¸Šï¼Œè€Œä¸æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿå®‰è£…ã€‚
- ç¬¬ 2 ç±»è™šæ‹Ÿæœºç›‘æ§å™¨æˆ–æ‰˜ç®¡è™šæ‹Ÿæœºç®¡ç†ç›‘æ§å™¨é€šè¿‡ä¸»æœºçš„æ“ä½œç³»ç»Ÿä¸åº•å±‚ä¸»æœºç¡¬ä»¶è¿›è¡Œäº¤äº’ã€‚ç¬¬ 2 ç±»è™šæ‹Ÿæœºç›‘æ§å™¨å®‰è£…åœ¨è®¡ç®—æœºä¸Šï¼Œåœ¨å…¶ä¸­ä½œä¸ºåº”ç”¨ç¨‹åºè¿è¡Œã€‚
- Hypervisorå±äºåè°ƒå±‚ï¼ŒåŒæ—¶è¿è¡Œå¤šä¸ªè™šæ‹Ÿæœº
![Hypervisor](/img/comp315/hypervisor.png)

# JavaScript
> æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼Œç®€å•å†™å‡ ä¸ªTutorialçš„ç‚¹
- åŸå‹é“¾(Prototype Chain)ï¼šè¿™ä¸ªæœºåˆ¶çš„å…³é”®ç‚¹åœ¨äºå½“ä½ å°è¯•è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡æœ¬èº«æ²¡æœ‰è¿™ä¸ªå±æ€§æˆ–æ–¹æ³•ï¼ŒJavaScriptå¼•æ“å°±ä¼šæ²¿ç€è¿™ä¸ªå¯¹è±¡çš„åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°è¿™ä¸ªå±æ€§æˆ–æ–¹æ³•æˆ–åˆ°è¾¾åŸå‹é“¾çš„æœ«ç«¯ã€‚```object.getPrototypeOf()```
- functionä¹Ÿæ˜¯ä¸€ä¸ªobject
- undefineå’Œnullæ˜¯ä¸åŒçš„ç±»å‹ï¼Œ
    - ```undefine === null``` False
    - ```undefine == null``` True
- å£°æ˜å˜é‡åˆ«ç”¨varã€‚å˜çš„å°±ç”¨letï¼Œä¸å˜å°±ç”¨constï¼Œèˆå¼ƒvar
- ```html
    <button class="
      bg-green-500 
      hover:bg-green-700 
      text-white 
      font-bold 
      py-2 px-4 
      rounded 
      transform transition 
      hover:scale-110">
        Shop Online
    </button>
    <!-- py-2 px-4 æŒ‡xå’Œyæ–¹å‘ä¸Šçš„paddingå¤§å°-->
- mapæ–¹æ³•
    ```js
    const numbers = [1, 2, 3, 4];
    const doubled = numbers.map(num => num * 2);
    console.log(doubled);
    ```
- reduceæ–¹æ³•
    ```js
    const numbers = [1, 2, 3, 4];
    const sum = numbers.reduce((acc, curr) => acc + curr, 0);
    console.log(sum);
    ```
# å®¹å™¨
> å®¹å™¨æ˜¯è™šæ‹Ÿæœºçš„è½»é‡çº§æ›¿ä»£äº§å“ï¼Œæ˜“äºåˆ›å»ºå’Œç®¡ç†ã€‚
å®¹å™¨å°è£…äº†åº”ç”¨ç¨‹åºåŠå…¶æ‰€éœ€è¦çš„ä¾èµ–ï¼Œä½äºæ“ä½œç³»ç»Ÿçš„å†…æ ¸ä¹‹ä¸Šã€‚ä»åº”ç”¨ç¨‹åºçš„è§’åº¦æ¥çœ‹ï¼Œå®¹å™¨å°±æ˜¯è™šæ‹Ÿæœºï¼Œåªä¸è¿‡â€æ›´è½»â€œã€‚
## Docker
> Dockeræ˜¯æœ€ä»¤äººç†ŸçŸ¥çš„å®¹å™¨åŒ–æŠ€æœ¯ã€‚

åœ¨Dockerä¸­ï¼Œå®¹å™¨ç”±é•œåƒåˆ›å»ºï¼Œé•œåƒç”±Dockerfileç¼–å†™
```shell
# æ‹‰ä¸€ä¸ªUbentué•œåƒ
$ docker pull ubuntu:latest

# è¿è¡Œè¿™ä¸ªå®¹å™¨
$ docker run -it ubuntu:latest /bin/bash
```
å†™ä¸€ä¸ªDockerfileï¼Œåˆ›å»ºdockeré•œåƒğŸ‘‡
```dockerfile
# æŒ‡å®šåŸºç¡€é•œåƒ
FROM ubuntu : latest
# åˆ›å»ºshellè„šæœ¬å¹¶å°†â€œecho Hello, World!â€å†™å…¥è„šæœ¬
RUN echo " echo Hello , World ! " > / hello - world . sh
# ä¸ºæ–‡ä»¶æ·»åŠ æ‰§è¡Œæƒé™
RUN chmod + x / hello - world . sh
# æŒ‡å®šå®¹å™¨å¯åŠ¨æ—¶é»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚
CMD [ " / hello - world . sh " ]
```
è¿è¡ŒDockerğŸ‘‡
```shell
# Build the Docker image
$ docker build -t hello - world .

# Run the Docker container
$ docker run hello - world
```
å¸¸ç”¨Dockerå‘½ä»¤
```shell
# æŸ¥çœ‹é•œåƒ
docker images
# æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨
docker ps
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ŒåŒ…æ‹¬åœæ­¢çš„
docker ps -a
# åœæ­¢å®¹å™¨
docker stop [containerId]
# åˆ é™¤å®¹å™¨
docker rm [containerId]
# åˆ é™¤é•œåƒ
docker rmi ubentu:lastest
```
imageï¼ˆé•œåƒï¼‰å’Œcontainerï¼ˆå®¹å™¨ï¼‰çš„åŒºåˆ«
æœ€æ ¹æœ¬çš„åŒºåˆ«åœ¨äºå®ƒä»¬æ“ä½œçš„å¯¹è±¡ä¸åŒã€‚```docker images```å…³æ³¨çš„æ˜¯Dockeré•œåƒï¼Œè¿™äº›é•œåƒæ˜¯å®¹å™¨çš„æ¨¡æ¿ã€‚è€Œ```docker ps```å…³æ³¨çš„æ˜¯ç”±è¿™äº›é•œåƒåˆ›å»ºçš„å®¹å™¨çš„å®é™…è¿è¡ŒçŠ¶æ€
## Dockerå’ŒLinux Kernel
- å…±äº«Kernelï¼šå®¹å™¨åˆ©ç”¨å®¿ä¸»æœºçš„å†…æ ¸ï¼Œå®ƒä»¬ä¸éœ€è¦åƒè™šæ‹Ÿæœºé‚£æ ·è™šæ‹ŸåŒ–ç¡¬ä»¶å’Œè¿è¡Œè‡ªå·±çš„æ“ä½œç³»ç»Ÿå†…æ ¸ã€‚è¿™æ„å‘³ç€å®¹å™¨éå¸¸è½»é‡ï¼Œå¯åŠ¨å¿«ï¼Œå ç”¨èµ„æºå°‘ã€‚
- éš”ç¦»æ€§ï¼šå°½ç®¡å®¹å™¨å…±äº«å®¿ä¸»æœºçš„å†…æ ¸ï¼Œä½†å®ƒä»¬é€šè¿‡Linuxå†…æ ¸çš„ç‰¹æ€§å¦‚cgroupsï¼ˆæ§åˆ¶ç»„ï¼‰å’Œnamespacesï¼ˆå‘½åç©ºé—´ï¼‰æ¥å®ç°è¿›ç¨‹ã€ç½‘ç»œã€æ–‡ä»¶ç³»ç»Ÿç­‰æ–¹é¢çš„éš”ç¦»ã€‚è¿™ä½¿å¾—å®¹å™¨è¡¨ç°å¾—å°±åƒæ˜¯åœ¨ç‹¬ç«‹çš„ç¯å¢ƒä¸­è¿è¡Œä¸€æ ·ã€‚
- Kernelä¾èµ–æ€§ï¼šå› ä¸ºå®¹å™¨ç›´æ¥ä¾èµ–äºå®¿ä¸»æœºçš„Linuxå†…æ ¸ï¼Œæ‰€ä»¥å®¹å™¨åŒ–çš„åº”ç”¨å¿…é¡»ä¸å®¿ä¸»æœºçš„å†…æ ¸å…¼å®¹ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œå¦‚æœä½ éœ€è¦ç‰¹å®šçš„å†…æ ¸ç‰¹æ€§æˆ–ç‰ˆæœ¬ï¼Œä½ çš„å®¿ä¸»æœºå¿…é¡»è¿è¡Œæ”¯æŒè¿™äº›ç‰¹æ€§çš„Linuxå†…æ ¸ã€‚

Linuxå†…æ ¸æ”¯æŒå®¹å™¨åŒ–ä¾èµ–ä»¥ä¸‹ä¸‰ä¸ªåŠŸèƒ½
- Namespaces
å‘½åç©ºé—´èƒ½å¤Ÿéš”ç¦»å’Œåˆ†å‰²ç³»ç»Ÿèµ„æºï¼Œä½¿å¾—è¿›ç¨‹åªèƒ½çœ‹åˆ°è‡ªå·±å‘½åç©ºé—´å†…çš„èµ„æºã€‚Linuxæä¾›äº†å¤šç§ç±»å‹çš„å‘½åç©ºé—´ï¼Œæ¯ç§ç±»å‹éƒ½éš”ç¦»ä¸€ç»„ç‰¹å®šçš„ç³»ç»Ÿèµ„æºã€‚ä¾‹å¦‚ï¼ŒPIDï¼ˆè¿›ç¨‹IDï¼‰å‘½åç©ºé—´éš”ç¦»è¿›ç¨‹IDï¼Œä½¿å¾—ä¸åŒå‘½åç©ºé—´ä¸­çš„è¿›ç¨‹å¯ä»¥æœ‰ç›¸åŒçš„PIDï¼Œè€Œç½‘ç»œå‘½åç©ºé—´éš”ç¦»ç½‘ç»œæ¥å£å’Œè·¯ç”±è¡¨ï¼Œç­‰ç­‰ã€‚è¿™æ„å‘³ç€åœ¨ä¸€ä¸ªå®¹å™¨ä¸­è¿è¡Œçš„è¿›ç¨‹å¯ä»¥æœ‰è‡ªå·±çš„ç½‘ç»œæ¥å£å’ŒIPåœ°å€ï¼Œå°±å¥½åƒå®ƒåœ¨è‡ªå·±çš„è™šæ‹Ÿç½‘ç»œä¸­ä¸€æ ·ã€‚
- Control groups
æ§åˆ¶ç»„å…è®¸å¯¹è¿›ç¨‹ç¾¤ç»„è¿›è¡Œèµ„æºæ§åˆ¶ã€é™åˆ¶ã€åˆ†é…å’Œç›‘è§†ã€‚é€šè¿‡cgroupsï¼Œç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥æŒ‡å®šCPUã€å†…å­˜ã€ç£ç›˜I/Oç­‰èµ„æºçš„é™åˆ¶ï¼Œç¡®ä¿æŸä¸ªå®¹å™¨ä¸ä¼šä½¿ç”¨è¿‡å¤šçš„èµ„æºï¼Œä»è€Œå½±å“åˆ°ç³»ç»Ÿä¸Šå…¶ä»–çš„è¿›ç¨‹æˆ–å®¹å™¨ã€‚
- Union File Systems
è”åˆæ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿâ€œå åŠ â€åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªç»Ÿä¸€çš„æ–‡ä»¶ç³»ç»Ÿè§†å›¾ã€‚è¿™æ„å‘³ç€å¯ä»¥å°†ä¸åŒçš„ç›®å½•å±‚æ¬¡ç»“æ„åˆå¹¶æˆä¸€ä¸ªç›®å½•è§†å›¾ï¼Œå¯¹äºå®¹å™¨è€Œè¨€ï¼Œè¿™ä½¿å¾—å¯ä»¥é€šè¿‡å åŠ ä¸åŒçš„å±‚ï¼ˆæ¯å±‚åŒ…å«æ–‡ä»¶çš„å˜åŒ–ï¼‰æ¥æ„å»ºå®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿã€‚Dockerä¸­çš„é•œåƒå’Œå®¹å™¨å±‚å°±æ˜¯ä½¿ç”¨è”åˆæ–‡ä»¶ç³»ç»ŸæŠ€æœ¯å®ç°çš„ã€‚è¿™ç§æ–¹å¼ä½¿å¾—å®¹å™¨é•œåƒå˜å¾—æ›´åŠ é«˜æ•ˆï¼Œå› ä¸ºå¤šä¸ªå®¹å™¨å¯ä»¥å…±äº«åŒä¸€ä¸ªåŸºç¡€é•œåƒçš„åªè¯»å±‚ï¼Œè€Œæ¯ä¸ªå®¹å™¨çš„å˜åŒ–éƒ½å­˜å‚¨åœ¨è‡ªå·±çš„å¯å†™å±‚ä¸­ã€‚
# å®‰å…¨
## Vulnerabilities and the Zero-Day Problem
é›¶æ—¥é—®é¢˜ï¼ˆZero-day vulnerabilityï¼‰æŒ‡çš„æ˜¯ä¸€ç§å®‰å…¨æ¼æ´ï¼Œè¿™ç§æ¼æ´åœ¨è¢«å‘ç°åè¿˜æ²¡æœ‰å¾—åˆ°ä¿®å¤ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ¼æ´æ¥è¿›è¡Œæ”»å‡»ï¼Œè€Œä¸”è¢«æ”»å‡»çš„ç›®æ ‡å¹¶æ²¡æœ‰æå‰æ„è¯†åˆ°è¿™ä¸ªæ¼æ´çš„å­˜åœ¨ã€‚å› æ­¤ï¼Œæ”»å‡»è€…å¯ä»¥åœ¨æ¼æ´è¢«å…¬å¼€ä¹‹å‰åˆ©ç”¨å®ƒï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆç§°ä¹‹ä¸ºâ€œé›¶æ—¥â€ï¼Œå› ä¸ºæ¼æ´è¢«å‘ç°çš„é‚£ä¸€å¤©å°±è¢«åˆ©ç”¨äº†ã€‚

## ä¸»æœºé˜²å¾¡
> é€šå¸¸æ¥è®²ï¼Œæˆ‘ä»¬æ— æ³•é˜»æ­¢é›¶æ—¥æ”»å‡»ï¼Œä½†æ˜¯å¯ä»¥é™ä½é›¶æ—¥æ”»å‡»å¸¦æ¥çš„æŸå®³ï¼Œè¿™å°±æ¶‰åŠåˆ°ä¸»æœºé˜²å¾¡(host defences)ã€‚
### æœ€å°æƒé™åŸåˆ™
The principle of least privilege (PoLP)ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ä»»ä½•ç”¨æˆ·ã€ç¨‹åºæˆ–ç³»ç»Ÿè¿›ç¨‹åœ¨æ‰§è¡ŒæŸé¡¹æ“ä½œæ—¶ï¼Œåº”è¯¥ä»…å…·æœ‰å®Œæˆè¯¥æ“ä½œæ‰€éœ€çš„æœ€ä½æƒé™æˆ–æœ€å°æƒé™é›†ã€‚æœ€å°æƒé™åŸåˆ™çš„ç›®çš„æ˜¯å‡å°‘å®‰å…¨é£é™©å¹¶æé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚å®ƒæœ‰åŠ©äºé˜²æ­¢æ¶æ„è½¯ä»¶æ‰©æ•£ï¼Œå‡å°‘ç³»ç»Ÿæ¼æ´çš„æ”»å‡»é¢ï¼Œå¹¶é™åˆ¶å¯¹æ•æ„Ÿæ•°æ®çš„è®¿é—®ï¼Œä»è€Œé™ä½æ•°æ®æ³„éœ²æˆ–æŸåçš„é£é™©ã€‚

### æƒé™æå‡
æƒé™æå‡ï¼ˆPrivilege Escalationï¼‰æ˜¯æŒ‡åœ¨è®¡ç®—æœºå®‰å…¨é¢†åŸŸä¸­ï¼Œé€šè¿‡åˆ©ç”¨ç³»ç»Ÿä¸­çš„æ¼æ´ã€é…ç½®é”™è¯¯æˆ–è®¾è®¡ç¼ºé™·ï¼Œæœªæˆæƒçš„ç”¨æˆ·ã€ç¨‹åºæˆ–è¿›ç¨‹è·å¾—äº†æ¯”åŸæœ¬åˆ†é…ç»™å®ƒä»¬çš„æ›´é«˜çš„è®¿é—®æƒé™æˆ–åŠŸèƒ½çš„è¿‡ç¨‹ã€‚
- å‚ç›´æƒé™æå‡
å‚ç›´æƒé™æå‡ï¼Œä¹Ÿç§°ä¸ºææƒï¼Œå‘ç”Ÿåœ¨å½“ä½æƒé™ç”¨æˆ·æˆ–ç¨‹åºè·å–é«˜æƒé™çº§åˆ«ï¼ˆå¦‚ç®¡ç†å‘˜æˆ–rootæƒé™ï¼‰çš„èƒ½åŠ›æ—¶ã€‚è¿™ç§ç±»å‹çš„æƒé™æå‡å…è®¸æ”»å‡»è€…æ‰§è¡Œé€šå¸¸åªæœ‰ç³»ç»Ÿç®¡ç†å‘˜æ‰èƒ½æ‰§è¡Œçš„æ“ä½œï¼Œå¦‚è®¿é—®æ•æ„Ÿæ–‡ä»¶ã€ä¿®æ”¹ç³»ç»Ÿè®¾ç½®æˆ–å®‰è£…æ¶æ„è½¯ä»¶ã€‚
- æ°´ç“¶æƒé™æå‡
æ°´å¹³æƒé™æå‡å‘ç”Ÿåœ¨å½“ç”¨æˆ·æˆ–ç¨‹åºä»ä¸€ä¸ªæ™®é€šè´¦æˆ·è·³è½¬åˆ°å¦ä¸€ä¸ªå…·æœ‰ç›¸åŒæƒé™çº§åˆ«çš„è´¦æˆ·æ—¶ã€‚è™½ç„¶æ”»å‡»è€…æ²¡æœ‰è·å–æ›´é«˜çš„æƒé™çº§åˆ«ï¼Œä½†ä»–ä»¬å¯èƒ½èƒ½å¤Ÿè®¿é—®ç‰¹å®šçš„ã€åŸæœ¬ä¸åº”è¯¥è®¿é—®çš„æ•°æ®æˆ–åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ™®é€šç”¨æˆ·é€šè¿‡æ°´å¹³æƒé™æå‡æˆä¸ºå¦ä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼Œå¯èƒ½è®¿é—®åˆ°ç¬¬äºŒä¸ªç”¨æˆ·çš„ç§äººæ–‡ä»¶æˆ–æ•°æ®ã€‚

### Sandboxes
æ²™ç›’ï¼ˆSandboxï¼‰æ˜¯ä¸€ç§å®‰å…¨æŠ€æœ¯ï¼Œæ—¨åœ¨åœ¨ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒä¸­è¿è¡Œç¨‹åºæˆ–ä»£ç ï¼Œä»¥é˜²æ­¢è¯¥ç¨‹åºæˆ–ä»£ç å¯¹å®¿ä¸»ç³»ç»Ÿé€ æˆæ½œåœ¨çš„æŸå®³æˆ–ä¸å®‰å…¨çš„å½±å“ã€‚æ²™ç›’æä¾›äº†ä¸€ä¸ªä¸¥æ ¼æ§åˆ¶çš„æ‰§è¡Œç¯å¢ƒï¼Œå…¶ä¸­çš„åº”ç”¨ç¨‹åºå¯ä»¥æ‰§è¡Œï¼Œä½†åªèƒ½è®¿é—®æ˜ç¡®å…è®¸çš„èµ„æºå’Œæ“ä½œã€‚

æ²™ç›’çš„ç‰¹ç‚¹
- éš”ç¦»æ€§ï¼šæ²™ç›’ç¯å¢ƒä¸å®¿ä¸»ç³»ç»ŸåŠå…¶ä»–æ²™ç›’ç¯å¢ƒéš”ç¦»ï¼Œä»¥é˜²æ­¢ç¨‹åºé—´çš„ç›¸äº’å½±å“å’Œå¯¹å®¿ä¸»ç³»ç»Ÿçš„æ½œåœ¨ç ´åã€‚
- èµ„æºæ§åˆ¶ï¼šæ²™ç›’é™åˆ¶äº†è¿è¡Œåœ¨å…¶ä¸­çš„ç¨‹åºæ‰€èƒ½è®¿é—®çš„ç³»ç»Ÿèµ„æºï¼ˆå¦‚æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œã€ç³»ç»Ÿé…ç½®ç­‰ï¼‰ï¼Œå¹¶å¯ä»¥ç›‘æ§å’Œæ§åˆ¶å¯¹è¿™äº›èµ„æºçš„è®¿é—®ã€‚
- æ“ä½œé™åˆ¶ï¼šæ²™ç›’é€šå¸¸é™åˆ¶ç¨‹åºæ‰§è¡Œçš„æ“ä½œç±»å‹ï¼Œæ¯”å¦‚ç¦æ­¢ä¿®æ”¹ç³»ç»Ÿè®¾ç½®æˆ–è®¿é—®æ•æ„Ÿæ•°æ®ã€‚
- ç›‘æ§ä¸å®¡è®¡ï¼šæ²™ç›’ç¯å¢ƒå¯ä»¥ç›‘æ§ç¨‹åºçš„è¡Œä¸ºï¼Œè®°å½•ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œä¸ºå®‰å…¨åˆ†æå’Œå®¡è®¡æä¾›ä¾æ®ã€‚

### è‡ªä¸»è®¿é—®æ§åˆ¶
Discretionary Access Control æ˜¯ä¸€ç§è®¿é—®æ§åˆ¶æ¨¡å‹ï¼Œå®ƒå…è®¸èµ„æºçš„æ‹¥æœ‰è€…æˆ–æ‹¥æœ‰è€…æˆæƒçš„ç”¨æˆ·æ§åˆ¶å¯¹èµ„æºçš„è®¿é—®ã€‚åœ¨DACæ¨¡å‹ä¸­ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„åˆ¤æ–­ï¼ˆå³â€œè‡ªä¸»â€åœ°ï¼‰å†³å®šè°å¯ä»¥è®¿é—®ç‰¹å®šçš„èµ„æºã€‚

ç‰¹ç‚¹
- æ‰€æœ‰æƒå’Œæƒé™ï¼šåœ¨DACç³»ç»Ÿä¸­ï¼Œèµ„æºçš„è®¿é—®æƒé™é€šå¸¸åŸºäºèµ„æºçš„æ‰€æœ‰æƒã€‚æ‰€æœ‰è€…æœ‰æƒè®¾ç½®æˆ–æ›´æ”¹å¯¹å…¶èµ„æºçš„è®¿é—®æƒé™ã€‚
- çµæ´»æ€§ï¼šDACæä¾›äº†è¾ƒé«˜çš„çµæ´»æ€§ï¼Œå…è®¸ç”¨æˆ·æ ¹æ®éœ€è¦åˆ†äº«å’Œé™åˆ¶èµ„æºçš„è®¿é—®ã€‚è¿™ç§æ¨¡å‹é€‚åˆéœ€è¦é¢‘ç¹æ›´æ”¹æƒé™è®¾ç½®çš„ç¯å¢ƒã€‚
- ç”¨æˆ·æ§åˆ¶ï¼šç”¨æˆ·ï¼ˆæˆ–ç”¨æˆ·ç»„ï¼‰å¯ä»¥ç›´æ¥æ§åˆ¶å¯¹å…¶æ‹¥æœ‰çš„èµ„æºçš„è®¿é—®ï¼Œè€Œä¸æ˜¯ç”±ä¸­å¤®æ”¿ç­–æˆ–ç®¡ç†å‘˜å†³å®šã€‚

ä¸€äº›æŒ‡ä»¤ğŸ‘‡
```shell
# æŸ¥çœ‹æ–‡ä»¶æƒé™
$ ls -l filename

# æ›´æ”¹æ–‡ä»¶æƒé™ï¼ŒæŠŠæ–‡ä»¶æ”¹æˆå¯è¯»å¯å†™å¯æ‰§è¡Œ
$ chmod 755 filename

# root useræ‰§è¡Œï¼Œç»™ç®¡ç†å‘˜æƒé™
$ sudo chmod 755 filename
```
åœ¨Linuxä¸­ï¼Œæ–‡ä»¶æƒé™ç”±ä¸‰ä½æ•°ç»„æˆï¼Œå¯è¯»æ˜¯4ï¼Œå¯å†™æ˜¯2ï¼Œå¯æ‰§è¡Œæ˜¯1ã€‚æ‰€ä»¥755æ„æ€
- 7: (r+w+x) æœ‰å¯è¯»å¯å†™å¯æ‰§è¡Œçš„æƒé™ã€‚
- 5: (r+x) å½“å‰åˆ†ç»„æœ‰å¯è¯»+å¯æ‰§è¡Œçš„æƒé™ï¼Œä½†æ²¡æœ‰å¯å†™çš„æƒé™ã€‚
- 5: (r+x) å…¶ä»–äººä¹Ÿæœ‰å¯è¯»+å¯æ‰§è¡Œçš„æƒé™ï¼Œä½†æ²¡æœ‰å¯å†™çš„æƒé™ã€‚

### å¼ºè®¿é—®æ§åˆ¶
Mandatory Access Control (MAC)ã€‚å®ƒæ ¹æ®ä¸­å¤®æƒå¨çš„å†³ç­–è€Œä¸æ˜¯ç”¨æˆ·çš„è‡ªä¸»å†³å®šæ¥é™åˆ¶å¯¹ç³»ç»Ÿèµ„æºçš„è®¿é—®ã€‚ä¸è‡ªä¸»è®¿é—®æ§åˆ¶ï¼ˆDiscretionary Access Controlï¼ŒDACï¼‰ç›¸æ¯”ï¼ŒMACæä¾›äº†æ›´ä¸ºä¸¥æ ¼å’Œè¯¦ç»†çš„æ§åˆ¶ï¼Œç¡®ä¿åªæœ‰æˆæƒç”¨æˆ·æ‰èƒ½è®¿é—®ç‰¹å®šçš„ä¿¡æ¯æˆ–èµ„æºã€‚

ç‰¹ç‚¹
- ä¸­å¤®ç®¡ç†ï¼šåœ¨MACç­–ç•¥ä¸­ï¼Œè®¿é—®æ§åˆ¶ç­–ç•¥ç”±ç³»ç»Ÿç®¡ç†ï¼Œè€Œä¸æ˜¯ç”±èµ„æºçš„æ‰€æœ‰è€…æˆ–ç”¨æˆ·è®¾ç½®ã€‚è¿™æ„å‘³ç€ç”¨æˆ·ä¸èƒ½æ›´æ”¹ä»–ä»¬ä¸æ‹¥æœ‰çš„æ–‡ä»¶æˆ–èµ„æºçš„è®¿é—®æ§åˆ¶è®¾ç½®ã€‚
- å®‰å…¨æ ‡ç­¾ï¼šMACç³»ç»Ÿä½¿ç”¨å®‰å…¨æ ‡ç­¾æ¥æ ‡è¯†ä¸»ä½“ï¼ˆå¦‚ç”¨æˆ·æˆ–è¿›ç¨‹ï¼‰å’Œå®¢ä½“ï¼ˆå¦‚æ–‡ä»¶ã€ç›®å½•æˆ–è®¾å¤‡ï¼‰ã€‚è¿™äº›æ ‡ç­¾åŒ…å«äº†å®‰å…¨çº§åˆ«æˆ–åˆ†ç±»ä¿¡æ¯ï¼Œå¦‚æœºå¯†ã€ç§˜å¯†ç­‰ã€‚
- è®¿é—®å†³ç­–ï¼šè®¿é—®æ§åˆ¶å†³ç­–åŸºäºæ¯”è¾ƒä¸»ä½“çš„å®‰å…¨çº§åˆ«ä¸å®¢ä½“çš„å®‰å…¨çº§åˆ«ã€‚åªæœ‰å½“ä¸»ä½“çš„å®‰å…¨çº§åˆ«è¶³ä»¥è®¿é—®å®¢ä½“æ—¶ï¼Œè®¿é—®æ‰ä¼šè¢«å…è®¸ã€‚
- ç­–ç•¥å¼ºåˆ¶æ‰§è¡Œï¼šMACå¼ºåˆ¶æ‰§è¡Œé¢„å®šä¹‰çš„å®‰å…¨ç­–ç•¥ï¼Œè¿™äº›ç­–ç•¥æ—¨åœ¨ä¿æŠ¤ä¿¡æ¯ä¸è¢«æœªæˆæƒçš„è®¿é—®ã€æ³„éœ²æˆ–ç¯¡æ”¹ã€‚

åœ¨Red Hat Enterprise Linux, SELinuxä½œä¸ºè§£å†³æ–¹æ¡ˆå®ç°MACã€‚
## SELinux
> è¿™æ˜¯ä¸€ä¸ªåœ¨Linuxå†…æ ¸ä¸­å®ç°çš„å®‰å…¨æ¡†æ¶

SELinuxæœ‰ä¸‰ç§æ‰§è¡Œæ¨¡å¼
1. enforcing
    - è¿™æ˜¯SELinuxçš„é»˜è®¤æ¨¡å¼ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒSELinuxä¼šå¼ºåˆ¶æ‰§è¡Œå…¶å®‰å…¨ç­–ç•¥ï¼Œé™åˆ¶è¿›ç¨‹è®¿é—®èµ„æºã€‚å¦‚æœä¸€ä¸ªè¿›ç¨‹å°è¯•æ‰§è¡Œä¸€ä¸ªä¸è¢«å…è®¸çš„æ“ä½œï¼ŒSELinuxä¼šé˜»æ­¢è¿™ä¸ªæ“ä½œå¹¶è®°å½•ç›¸åº”çš„è¿è§„ä¿¡æ¯ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœSELinuxçš„ç­–ç•¥ä¸å…è®¸æŸä¸ªæ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªæ“ä½œå°±ä¸èƒ½è¢«æ‰§è¡Œï¼Œæ— è®ºæ‰§è¡Œå®ƒçš„ç”¨æˆ·æˆ–è¿›ç¨‹æœ‰å¤šé«˜çš„æƒé™ã€‚
2. permissive
    - åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒSELinuxåŒæ ·ä¼šæ£€æŸ¥æ‰€æœ‰çš„æ“ä½œï¼Œåˆ¤æ–­å®ƒä»¬æ˜¯å¦è¿åäº†å®‰å…¨ç­–ç•¥ï¼Œä½†å®ƒä¸ä¼šå®é™…é˜»æ­¢ä»»ä½•æ“ä½œã€‚ç›¸åï¼Œå®ƒä¼šè®°å½•æ‰€æœ‰è¢«æ£€æµ‹åˆ°çš„è¿è§„è¡Œä¸ºï¼Œå°±åƒåœ¨å¼ºåˆ¶æ¨¡å¼ä¸‹é‚£æ ·ã€‚è¿™ä¸ªæ¨¡å¼å¯¹äºè°ƒè¯•SELinuxç­–ç•¥éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸ç®¡ç†å‘˜çœ‹åˆ°å“ªäº›æ“ä½œä¼šè¢«é˜»æ­¢ï¼Œè€Œä¸éœ€è¦å®é™…ä¸Šé˜»æ­¢è¿™äº›æ“ä½œï¼Œè¿™æ ·å¯ä»¥åœ¨ä¸å½±å“ç³»ç»Ÿæ­£å¸¸è¿è¡Œçš„æƒ…å†µä¸‹æµ‹è¯•å’Œä¿®æ”¹ç­–ç•¥ã€‚
3. disabled
    - åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒSELinuxè¢«å®Œå…¨ç¦ç”¨ï¼Œä¸ä¼šæ£€æŸ¥æˆ–é™åˆ¶ä»»ä½•æ“ä½œã€‚è¿™æ„å‘³ç€ç³»ç»Ÿçš„å®‰å…¨å°†å®Œå…¨ä¾èµ–äºä¼ ç»Ÿçš„ç¦»æ•£è®¿é—®æ§åˆ¶ï¼ˆDACï¼‰æœºåˆ¶ï¼Œå¦‚æ–‡ä»¶æƒé™ç­‰ã€‚ç¦ç”¨SELinuxæ¨¡å¼é€šå¸¸ä¸æ¨èï¼Œå› ä¸ºè¿™ä¼šé™ä½ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚ç„¶è€Œï¼Œåœ¨æŸäº›ç‰¹å®šåœºåˆï¼Œæ¯”å¦‚å…¼å®¹æ€§æµ‹è¯•æˆ–è€…åœ¨ç³»ç»Ÿä¸Šè¿è¡Œä¸å…¼å®¹SELinuxçš„è½¯ä»¶æ—¶ï¼Œå¯èƒ½éœ€è¦æš‚æ—¶ç¦ç”¨SELinuxã€‚

**Labelling in SELinux**

åœ¨SELinuxï¼ˆSecurity-Enhanced Linuxï¼‰ä¸­ï¼Œæ ‡ç­¾ï¼ˆLabelingï¼‰æ˜¯å®ç°å…¶å®‰å…¨ç­–ç•¥çš„æ ¸å¿ƒæœºåˆ¶ä¹‹ä¸€ã€‚SELinuxé€šè¿‡ä¸ºç³»ç»Ÿä¸­çš„æ¯ä¸ªå¯¹è±¡ï¼ˆå¦‚æ–‡ä»¶ã€è¿›ç¨‹ã€ç”¨æˆ·ç­‰ï¼‰å’Œä¸»ä½“ï¼ˆé€šå¸¸æŒ‡ç”¨æˆ·æˆ–è¿›ç¨‹ï¼‰åˆ†é…å®‰å…¨æ ‡ç­¾æ¥å·¥ä½œã€‚è¿™äº›æ ‡ç­¾ç”¨äºå®šä¹‰å’Œæ§åˆ¶ä¸»ä½“å¯¹å¯¹è±¡çš„è®¿é—®æƒé™ï¼Œä¾æ®çš„æ˜¯å®šä¹‰åœ¨SELinuxç­–ç•¥ä¸­çš„è§„åˆ™ã€‚

ä½œç”¨ï¼šSELinuxé€šè¿‡åŒ¹é…ä¸»ä½“çš„æ ‡ç­¾ä¸å¯¹è±¡çš„æ ‡ç­¾æ¥å†³å®šæ˜¯å¦å…è®¸æŸä¸ªè®¿é—®è¯·æ±‚ã€‚è¿™ç§åŸºäºæ ‡ç­¾çš„è®¿é—®æ§åˆ¶æœºåˆ¶å…è®¸SELinuxå®ç°å¼ºåˆ¶è®¿é—®æ§åˆ¶ï¼ˆMACï¼‰ï¼Œå³ä½¿åœ¨ä¸»ä½“æ‹¥æœ‰è¶³å¤ŸLinuxä¼ ç»Ÿæƒé™ï¼ˆå¦‚rootï¼‰çš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½é™åˆ¶å¯¹æ•æ„Ÿèµ„æºçš„è®¿é—®ã€‚

SELinuxçš„å®‰å…¨æ ‡ç­¾é€šå¸¸ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆï¼š
- ç”¨æˆ·ï¼ˆUserï¼‰ï¼šä¸åŒäºLinuxç³»ç»Ÿçš„ç”¨æˆ·ï¼ŒSELinuxç”¨æˆ·ä»£è¡¨çš„æ˜¯å®‰å…¨ç­–ç•¥ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œç”¨äºæ§åˆ¶è®¿é—®æƒé™ã€‚å®ƒå®šä¹‰äº†ä¸€ç»„å¯ä»¥æ‰§è¡Œçš„è§’è‰²ã€‚
- è§’è‰²ï¼ˆRoleï¼‰ï¼šè§’è‰²ç”¨äºå°†æƒé™é›†åˆä¸SELinuxç”¨æˆ·å’Œç±»å‹å…³è”èµ·æ¥ã€‚è¿›ç¨‹å¿…é¡»æ‹¥æœ‰å¯¹åº”çš„è§’è‰²æ‰èƒ½è®¿é—®æŸäº›ç±»å‹çš„å¯¹è±¡ã€‚
- ç±»å‹ï¼ˆTypeï¼‰ï¼šä¹Ÿç§°ä¸ºåŸŸï¼ˆDomainï¼‰å¯¹äºè¿›ç¨‹è€Œè¨€ã€‚ç±»å‹æ˜¯SELinuxä¸­æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œå®ƒä¸ºå¯¹è±¡å’Œä¸»ä½“å®šä¹‰äº†å…·ä½“çš„å®‰å…¨ç­–ç•¥ã€‚é€šè¿‡ç±»å‹ï¼ŒSELinuxç­–ç•¥å¯ä»¥éå¸¸ç»†è‡´åœ°æ§åˆ¶å“ªäº›ä¸»ä½“å¯ä»¥è®¿é—®å“ªäº›å¯¹è±¡ã€‚
- æ•æ„Ÿåº¦ï¼ˆSensitivityï¼‰/æ¸…æ™°åº¦ï¼ˆClearanceï¼‰ï¼šè¿™äº›æ˜¯ç”¨äºå¤šçº§å®‰å…¨ï¼ˆMLSï¼‰ç­–ç•¥çš„å¯é€‰éƒ¨åˆ†ï¼Œå®ƒä»¬å®šä¹‰äº†æ•°æ®çš„æ•æ„Ÿåº¦çº§åˆ«å’Œä¸»ä½“çš„è®¿é—®çº§åˆ«ã€‚

## Tutorial for SELinux
1. SELinuxæ ‡ç­¾åœ¨æ–‡ä»¶ç®¡ç†ç³»ç»Ÿä¸­çš„ä½œç”¨
    - Every process has a lable, and every file/directory object in the operating system has a label
    - Network ports, devices, and potentially host names also have labels assigned to them
    - Rules are written to control the access of a process label to an object lable
    - The kernel enforces these rules
2. What is the purpose of ls -Z
    - General information about the file, such as permission, owner, size, and modification time.
    - SELinux security context for each file and directory.
3. ```chcon -t https_sys_content_t /var/www/html/index.html``` -tæ ‡ç­¾çš„ä½œç”¨å’Œchconçš„ä½œç”¨
    - chcon is a command to change the security context. like "change context"
    - -t indicates the type, in this case, the SELinux type is https_sys_content_t
4. SELinuxä¸­enforcingå’Œpermissiveæ¨¡å‹çš„åŒºåˆ«
    - In enforcing mode, SELinux policies are enforced and access violations are logged.
    - In permissive mode, SELinux policies are not enforced but access violations are logged.
5. æ€ä¹ˆæŸ¥çœ‹SELinuxå¸ƒå°”è¿ç®—çš„çŠ¶æ€(ä»¥httpd_can_network_connectä¸ºä¾‹)
    ```shell
    $ getsebool httpd_can_network_connect
    $ setsebool httpd_can_network_connect on // æš‚æ—¶æ›´æ”¹ï¼Œé‡å¯åä¸ä¿æŒè¿æ¥
    $ setsebool -P httpd_can_network_connect on // Pæ˜¯permanentï¼Œé‡å¯åä¾ç„¶ä¿æŒè¿æ¥
    ```
6. ```audit2allow```æŒ‡ä»¤çš„ä½œç”¨ï¼Œæ€ä¹ˆç”¨å®ƒæ’é™¤è¿åSELinuxç­–ç•¥çš„æ•…éšœ
    - Used to analyse permission issues caused by SELinux. It mainly reads policy violations from SELinux's audit logs and then generates policy rules that allow these behaviours.
    - ```audit2allow -w -a```Reads audit logs and generates comprehensible descriptions explaining why certain operations were denied.
7. How do you set selinux to permissive mode for a specific daemon, such as httpd, without affecting the global SELinux mode?
    - ç¡®è®¤daemonçš„ SELinux ç±»å‹ï¼Œ```ps -eZ | grep httpd```
    - è®¾å®šdaemonä¸ºpermissiveæ¨¡å¼ï¼Œ```sudo semanage permissive -a httpd_t```
    - éªŒè¯è®¾ç½®ï¼Œ```semanage permissive -l```
    - é€šè¿‡ä»¥ä¸Šæ­¥éª¤å°±å¯ä»¥å•ç‹¬ä¸º httpd å®ˆæŠ¤è¿›ç¨‹è®¾ç½® SELinux ä¸º permissive æ¨¡å¼ï¼Œè€Œä¸æ”¹å˜ç³»ç»Ÿçš„å…¨å±€ SELinux çŠ¶æ€ã€‚
8. How do you undo this change
    - è¦æ’¤é”€ä¹‹å‰å°†ç‰¹å®šå®ˆæŠ¤è¿›ç¨‹å¦‚ httpd è®¾ä¸º permissive æ¨¡å¼çš„æ›´æ”¹ï¼Œæ‚¨éœ€è¦å°†å®ƒä» permissive ç±»å‹åˆ—è¡¨ä¸­ç§»é™¤ï¼Œä½¿å…¶é‡æ–°å—åˆ° enforcing æ¨¡å¼çš„æ§åˆ¶ã€‚
    - ç§»é™¤å®ˆæŠ¤è¿›ç¨‹çš„ permissive ç±»å‹è®¾ç½®ï¼Œ```sudo semanage permissive -d httpd_t```
    - éªŒè¯æ˜¯å¦ç§»é™¤æˆåŠŸï¼Œ```semanage permissive -l```
    - é‡å¯å®ˆæŠ¤è¿›ç¨‹```sudo systemctl restart httpd```
9. IPv4åœ°å€æ˜¯192.168.100.14ï¼Œç½‘ç»œæ©ç æ˜¯255.255.255.0ï¼Œæ€ä¹ˆè®¡ç®—network address
    - æŠŠIPv4å’Œç½‘ç»œæ©ç éƒ½è½¬æˆäºŒè¿›åˆ¶ï¼Œandæ“ä½œï¼Œå¾—å‡ºçš„ç»“æœå†è½¬å›åè¿›åˆ¶ï¼Œå¾—å‡ºçš„ç»“æœå°±æ˜¯network address
    - è¿™é‡Œè®¡ç®—å¥½çš„network addressæ˜¯192.168.100.0
10. ä¸Šé¢æåˆ°çš„è¿™ä¸ªç½‘ç»œèƒ½æ”¯æŒå¤šå°‘ä¸ªä¸»æœºï¼Ÿ
    - æ ¹æ®ç½‘ç»œæ©ç ï¼Œæœ€åä¸€ä¸ªå…«ä½ç»„æ˜¯ä¸ºä¸»æœºåˆ†é…çš„ï¼Œå…¶ä¸­æœ‰8ä¸ª0ï¼Œå¯é…ç½®ä¸»æœºæ•°å°±æ˜¯256ä¸ªï¼Œä½†æ˜¯è¦å‡å»ä¸€ä¸ªç½‘ç»œåœ°å€(192.168.100.0)å’Œä¸€ä¸ªå¹¿æ’­åœ°å€(192.168.100.255)ï¼Œå¯é…ç½®ä¸»æœºæ•°å°±æ˜¯254ä¸ª
11. 
# Ansible
## Inventory file
ä½¿ç”¨Ansibleä¹‹å‰ï¼ŒInventory æ–‡ä»¶æ˜¯ä¸€ä¸ªå®šä¹‰äº†å¯è¢« Ansible ç®¡ç†çš„æ‰€æœ‰ä¸»æœºåŠå…¶ç»„çš„å…³é”®ç»„ä»¶ã€‚è¿™äº›æ–‡ä»¶å¯ä»¥æ˜¯é™æ€çš„æˆ–åŠ¨æ€çš„ï¼Œå…è®¸ Ansible çŸ¥é“å®ƒå¯ä»¥è¿æ¥å“ªäº›æœåŠ¡å™¨ï¼Œä»¥åŠè¿™äº›æœåŠ¡å™¨å¦‚ä½•ç»„ç»‡ã€‚
```yaml
leafs:
    hosts:
        leaf01:
            ansible_host: 10.16.10.11
        leaf02:
            ansible_host: 10.16.10.12
spines:
    hosts:
        spine01:
            ansible_host: 10.16.10.13
        spine02:
            ansible_host: 10.16.10.14
```
æœ‰äº†inventory fileä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ansibleå‘½ä»¤è¡Œå·¥å…·åœ¨ä¸»æœºä¸Šè¿è¡Œinventoryä¸­çš„æŒ‡ä»¤ï¼Œä¾‹å¦‚ä½¿ç”¨pingæ£€æŸ¥inventoryä¸­æ‰€æœ‰ä¸»æœºçš„è¿æ¥ã€‚
```shell
ansible -i hosts.ini local -m ping
```
## Playbook
Playbookèƒ½æè¿°æ¯”å‘½ä»¤è¡Œæ›´å¤æ‚çš„é…ç½®ï¼Œä¾‹å¦‚ï¼š
```yaml
---
- name: Ping all hosts
  hosts: all
  tasks:
    - name: Check connectivity
      ping:
      loop: "{{ range(1, 4) | list }}"
      loop_control:
        label: "Ping number {{ item }}"
```

## Playbookçš„ç»“æ„
Playbookç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆ
- **Plays:** è¿è¡Œä»»åŠ¡çš„åŸºæœ¬å•å…ƒã€‚æ¯ä¸ª Play æŒ‡å®šäº†ç›®æ ‡ä¸»æœºã€éœ€è¦æ‰§è¡Œçš„ Tasksï¼Œä»¥åŠå¯èƒ½çš„ä¸€äº›å˜é‡è®¾ç½®ã€‚ä¸€ä¸ª Playbook å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª Playï¼Œæ¯ä¸ª Play ä¸ºä¸åŒçš„ä¸»æœºæˆ–ä¸»æœºç»„å®šä¹‰æ“ä½œã€‚
- **Tasks:** æ˜¯ Play ä¸­æ‰§è¡Œçš„å…·ä½“æ“ä½œã€‚æ¯ä¸ª Task é€šå¸¸è°ƒç”¨ä¸€ä¸ª Ansible Moduleï¼Œç”¨äºæ‰§è¡Œç‰¹å®šçš„æ“ä½œï¼Œå¦‚å®‰è£…åŒ…ã€ç¼–è¾‘æ–‡ä»¶æˆ–åŒæ­¥ç›®å½•ç­‰ã€‚
- **Modules:** æ˜¯ Ansible çš„åŠŸèƒ½å•å…ƒï¼Œå®ƒä»¬å¯ä»¥ç‹¬ç«‹æ‰§è¡Œæˆ–ç”± Task è°ƒç”¨ã€‚æ¯ä¸ª Module è®¾è®¡ä¸ºå¤„ç†ç‰¹å®šçš„ä»»åŠ¡ï¼Œå¦‚ç®¡ç†ç³»ç»ŸåŒ…ï¼ˆyum, aptï¼‰ã€æ“ä½œæ–‡ä»¶ç³»ç»Ÿï¼ˆfile, copyï¼‰ç­‰ã€‚
- **Become:** æ˜¯ä¸€ç§æƒé™æå‡æœºåˆ¶ï¼Œå…è®¸ç”¨æˆ·ä»»åŠ¡åœ¨ç›®æ ‡ä¸»æœºä¸Šä»¥å…¶ä»–ç”¨æˆ·çš„æƒé™æ‰§è¡Œã€‚è¿™åœ¨éœ€è¦æ‰§è¡Œç®¡ç†å‘˜æƒé™çš„æ“ä½œæ—¶éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ ```become: yes``` å¯ä»¥ä½¿ä»»åŠ¡ä»¥ root ç”¨æˆ·æ‰§è¡Œã€‚
- **When:** ä¸€ç§æ¡ä»¶è¯­å¥ï¼Œç”¨äºæ§åˆ¶ Tasks çš„æ‰§è¡Œã€‚åªæœ‰å½“æŒ‡å®šçš„æ¡ä»¶æ»¡è¶³æ—¶ï¼Œç›¸å…³çš„ Task æ‰ä¼šæ‰§è¡Œã€‚
- **Register:** Registerç”¨äºæ•è· Task çš„è¾“å‡ºå¹¶å°†å…¶å­˜å‚¨åˆ°ä¸€ä¸ªå˜é‡ä¸­ã€‚
- **Loops:** å…è®¸åœ¨ Playbook ä¸­é‡å¤æ‰§è¡Œä¸€ä¸ª Task å¤šæ¬¡ï¼Œæ¯æ¬¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ•°æ®ã€‚è¿™å¯¹äºæ‰§è¡Œæ‰¹é‡æ“ä½œï¼ˆå¦‚åˆ›å»ºå¤šä¸ªç”¨æˆ·ã€å®‰è£…å¤šä¸ªè½¯ä»¶åŒ…ç­‰ï¼‰éå¸¸æœ‰ç”¨ã€‚

## Anything as a service
äº‘æœåŠ¡å•†æä¾›å¯¹äº‘çš„ä¸‰çº§è®¿é—®
- Infrastructure as a Service(IaaS): IaaS æ˜¯ä¸€ç§æä¾›è™šæ‹ŸåŒ–çš„è®¡ç®—èµ„æºä½œä¸ºæœåŠ¡çš„æ¨¡å‹ã€‚å®¢æˆ·åœ¨ IaaS ç¯å¢ƒä¸­ç§Ÿç”¨ IT åŸºç¡€è®¾æ–½ï¼Œå¦‚æœåŠ¡å™¨ã€è™šæ‹Ÿæœºï¼ˆVMsï¼‰ã€å­˜å‚¨ã€ç½‘ç»œå’Œæ“ä½œç³»ç»Ÿï¼Œæ¥è‡ªä¸€ä¸ªäº‘æä¾›å•†ã€‚è¿™ç§æœåŠ¡æ¨¡å¼å…è®¸ç”¨æˆ·é€šè¿‡äº’è”ç½‘è¿œç¨‹è®¿é—®è¿™äº›èµ„æºï¼Œè€Œæ— éœ€è´­ä¹°å’Œç»´æŠ¤ç‰©ç†æœåŠ¡å™¨ã€‚
- Platform as a Service(PaaS): PaaS æä¾›äº†é™¤äº†åº•å±‚åŸºç¡€è®¾æ–½ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬äº†è½¯ä»¶å¼€å‘å·¥å…·ã€åº“ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå’Œæ›´å¤šå¼€å‘è€…å·¥å…·çš„é›†åˆã€‚ç”¨æˆ·å¯ä»¥åœ¨è¿™ä¸ªå¹³å°ä¸Šæ„å»ºã€éƒ¨ç½²å’Œç®¡ç†åº”ç”¨ï¼Œæ— éœ€å…³å¿ƒæ“ä½œç³»ç»Ÿã€è½¯ä»¶æ›´æ–°ã€å­˜å‚¨æˆ–åŸºç¡€è®¾æ–½ã€‚
- Software as a Service(SaaS): SaaS æ˜¯ä¸€ç§è½¯ä»¶åˆ†å‘æ¨¡å‹ï¼Œå…¶ä¸­åº”ç”¨è½¯ä»¶è¢«æ‰˜ç®¡åœ¨äº‘ä¸­ï¼Œå¹¶é€šè¿‡äº’è”ç½‘å‘æœ€ç»ˆç”¨æˆ·æä¾›ã€‚ç”¨æˆ·ä¸éœ€è¦å®‰è£…ä»»ä½•è½¯ä»¶ï¼Œåªéœ€é€šè¿‡ç½‘ç»œè®¿é—®è¿™äº›åº”ç”¨ã€‚SaaS æä¾›å•†é€šå¸¸ä¼šæä¾›åº”ç”¨çš„ç»´æŠ¤ã€æ”¯æŒã€å®‰å…¨å’Œæ€§èƒ½æ›´æ–°ã€‚

## Everything as Code
- Infrastructure as Code(IaC): é€šè¿‡ä»£ç æ¥ç®¡ç†å’Œé…ç½®åŸºç¡€è®¾æ–½ï¼ˆå¦‚æœåŠ¡å™¨ã€ç½‘ç»œã€è™šæ‹Ÿæœºç­‰ï¼‰ï¼Œä½¿ç”¨è„šæœ¬æˆ–å£°æ˜æ€§æ–‡ä»¶å®šä¹‰åŸºç¡€è®¾æ–½ï¼Œä»¥ä¾¿å¯ä»¥è‡ªåŠ¨åˆ›å»ºã€éƒ¨ç½²å’Œç®¡ç†åŸºç¡€è®¾æ–½èµ„æºã€‚
- Configuration as Code(CaC): ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬æˆ–é…ç½®ç®¡ç†å·¥å…·ï¼ˆå¦‚ Ansibleã€Chefã€Puppetï¼‰æ¥ç®¡ç†å’Œéƒ¨ç½²è½¯ä»¶é…ç½®ã€‚è¿™æ ·åšå¯ä»¥ç¡®ä¿ç³»ç»Ÿé…ç½®çš„ä¸€è‡´æ€§å’Œå¯é‡å¤æ€§ã€‚
## Ansible Variables

# Networking
## Protocol Stacks
åè®®æ˜¯ä¸€ç»„è§„åˆ™å’Œæ ‡å‡†ï¼Œç”¨äºå®šä¹‰æ•°æ®åœ¨ç½‘ç»œä¸­çš„ä¼ è¾“æ–¹å¼ã€‚è¿™äº›è§„åˆ™åŒ…æ‹¬æ•°æ®å¦‚ä½•è¢«æ ¼å¼åŒ–ã€ä¼ è¾“ã€æ¥æ”¶ï¼Œä»¥åŠå¦‚ä½•å¯¹é”™è¯¯è¿›è¡Œå“åº”ã€‚

ç½‘ç»œåè®®æ ˆï¼Œæ˜¯ä¸€ç»„å·¥ä½œåœ¨ä¸åŒå±‚æ¬¡ä¸Šçš„ç½‘ç»œåè®®çš„é›†åˆã€‚æ¯ä¸€å±‚éƒ½æ‰¿æ‹…ç‰¹å®šçš„ç½‘ç»œé€šä¿¡å­ä»»åŠ¡ï¼Œé€šè¿‡å±‚ä¸å±‚ä¹‹é—´å®šä¹‰è‰¯å¥½çš„æ¥å£ç›¸äº’ä½œç”¨ã€‚æ•°æ®åœ¨ä¸€ä¸ªå±‚å¤„ç†åï¼Œä¼šä¼ é€’åˆ°å¦ä¸€ä¸ªå±‚è¿›ä¸€æ­¥å¤„ç†ï¼Œç›´åˆ°å‘é€åˆ°ç½‘ç»œä¸Šï¼Œæ¥æ”¶æ–¹åˆ™æŒ‰ç›¸åé¡ºåºå¤„ç†æ•°æ®ã€‚

> ä¸¤ä¸ªä¸»è¦çš„åè®®æ ˆï¼šOSIå’ŒTCP/IPTCP/IP
### OSIæ¨¡å‹
OSIæ¨¡å‹æœ‰7å±‚
- Layer 7: åº”ç”¨å±‚(Application)ï¼Œä¸ºåº”ç”¨è½¯ä»¶æä¾›ç½‘ç»œæœåŠ¡ï¼Œå¦‚ HTTPã€FTPã€‚
- Layer 6: è¡¨ç¤ºå±‚(Presentation)ï¼Œæ•°æ®çš„ç¿»è¯‘ã€åŠ å¯†å’Œå‹ç¼©ã€‚
- Layer 5: ä¼šè¯å±‚(Session)ï¼Œç®¡ç†ç”¨æˆ·ä¼šè¯å’Œå¯¹è¯ï¼Œä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´ä»¥å¤šæ¬¡æ¥å›ä¼ è¾“çš„å½¢å¼æŒç»­äº¤æ¢ä¿¡æ¯ã€‚
- Layer 4: ä¼ è¾“å±‚(Transport)ï¼Œæä¾›ç«¯åˆ°ç«¯çš„é€šä¿¡æœåŠ¡ï¼Œå¦‚ TCP æˆ– UDPã€‚
- Layer 3: ç½‘ç»œå±‚(Network)ï¼Œå¤„ç†æ•°æ®åŒ…çš„è·¯ç”±å’Œè½¬å‘ã€‚æ„å»ºå’Œç®¡ç†å¤šèŠ‚ç‚¹ç½‘ç»œã€‚
- Layer 2: æ•°æ®é“¾è·¯å±‚(Data Link)ï¼Œå¤„ç†å¸§çš„ä¼ è¾“ï¼Œé”™è¯¯æ£€æµ‹å’Œçº æ­£ã€‚
- Layer 1: ç‰©ç†å±‚(Physical)ï¼Œå¤„ç†åŸå§‹çš„æ¯”ç‰¹æµä¼ è¾“ã€‚
### TCP/IPæ ˆ
ç®€åŒ–äº†OSIæ¨¡å‹
- Layer 4: åº”ç”¨å±‚(Application)ï¼ŒåŒ…å« OSI çš„ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚å’Œåº”ç”¨å±‚çš„åŠŸèƒ½ï¼Œå¤„ç†æ‰€æœ‰é«˜çº§çš„åº”ç”¨åè®®ã€‚
- Layer 3: ä¼ è¾“å±‚(Transport)ï¼Œè´Ÿè´£æä¾›ç«¯åˆ°ç«¯çš„é€šä¿¡ï¼Œä¸»è¦ä½¿ç”¨ TCP å’Œ UDPã€‚
- Layer 2: äº’è”ç½‘å±‚(Internet)ï¼Œç›¸å½“äº OSI çš„ç½‘ç»œå±‚ï¼Œä¸»è¦ä½¿ç”¨ IP åè®®ã€‚
- Layer 1: ç½‘ç»œæ¥å£å±‚(Physical)ï¼Œç­‰åŒäº OSI çš„ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚ï¼Œå¤„ç†ä¸ç‰©ç†ç½‘ç»œçš„æ¥å£ã€‚

## Protocols
ä¸¤ä¸ªè¦é€šä¿¡çš„è®¡ç®—æœºå¦‚ä½•æ‰¾åˆ°å½¼æ­¤ï¼Ÿ

é¦–å…ˆä»‹ç»3ç§åœ°å€
1. Domain name: https://google.com
2. IP Address: 101.103.101.103
3. MAC Address: åˆ†é…ç»™ç½‘ç»œæ¥å£æ§åˆ¶å™¨(Network Interface Controller)çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚å®ƒåœ¨ OSI æ¨¡å‹çš„æ•°æ®é“¾è·¯å±‚ï¼ˆç¬¬ 2 å±‚ï¼‰è¿è¡Œï¼Œå…è®¸ç½‘å¡ç›¸äº’é€šä¿¡ã€‚

ä¸‹é¢è¯¦ç»†è¯´æ˜OSIæ¨¡å‹ä¸­é™¤äº†ç‰©ç†å±‚çš„å‰©ä¸‹å…­å±‚
- Layer 2 & Ethernet
    - æ•°æ®é“¾è·¯å±‚ç›´æ¥é€šè¿‡ç½‘ç»œäº¤æ¢æœºè¿›è¡Œé€šä¿¡ï¼Œè€Œæ— éœ€é€šè¿‡è·¯ç”±å™¨ã€‚
    - ä»¥å¤ªç½‘æ˜¯æ•°æ®é“¾è·¯å±‚ä¸­æœ€å¸¸è§çš„ä¸€ç§æŠ€æœ¯æ ‡å‡†ï¼Œä¹Ÿæ˜¯æœ€æ™®éçš„å±€åŸŸç½‘æŠ€æœ¯ã€‚
    - æ•°æ®é“¾è·¯å±‚è´Ÿè´£å°†æ¯”ç‰¹ç»„ç»‡åˆ°ä»¥å¤ªç½‘å¸§ä¸­ï¼Œå¹¶ç¡®ä¿åœ¨ç‰©ç†ä»‹è´¨ä¸Šçš„å¯é ä¼ è¾“ã€‚
    - Ethernet Frameæ„æˆï¼šDestination MAC, Source MAC, Type, Data, CRC
- Layer 3 & IP
    - IPv4: 192.168.0.1 æ¯ä¸€å—æ•°å­—éƒ½æ˜¯ç”±0-255çš„æ•°å­—ç»„æˆçš„ã€‚
    - IPv6: 2001:0DB8:ABCD:EF01:2345:6789:ABCD:EF01 ç”±8ä½ç»„æˆï¼Œæ¯ä¸€å—éƒ½æ˜¯ä¸€ä¸ª4ä½16è¿›åˆ¶æ•°æ®
- Layer 4 & TCP and UDP
    - TCPåˆå«Transport Communication Protocolï¼Œè¿™æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„åè®®ï¼Œæä¾›å¯é çš„ã€æœ‰åºçš„å’Œæ— å·®é”™çš„æ•°æ®ä¼ è¾“æœåŠ¡ã€‚å®ƒé€šè¿‡åºåˆ—å·ã€ç¡®è®¤åº”ç­”ã€é‡ä¼ æœºåˆ¶ã€æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ç­‰æŠ€æœ¯æ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§å’Œå®Œæ•´æ€§ã€‚
    - UDPåˆå«User Dataram Protocolï¼ŒUDP ä¸ä¿è¯æ•°æ®åŒ…çš„é¡ºåºã€å®Œæ•´æ€§æˆ–å¯é æ€§ï¼Œä¹Ÿä¸è¿›è¡Œæµé‡æ§åˆ¶æˆ–æ‹¥å¡æ§åˆ¶ã€‚å®ƒä»…ä»…å‘é€æ•°æ®ï¼Œå¹¶å¸Œæœ›å®ƒä»¬èƒ½åˆ°è¾¾ç›®çš„åœ°ï¼Œä½†ä¸ä¿è¯å®ƒä»¬ä¸€å®šä¼šåˆ°è¾¾ã€‚
- Layer 6 & TLS(Transport Layer Security)
    - TLSæ˜¯ä¸€ç§åŠ å¯†åè®®ï¼Œåœ¨è®¡ç®—æœºç½‘ç»œä¸­ç”¨æ¥æä¾›é€šä¿¡å®‰å…¨ï¼Œåœ¨è¡¨ç¤ºå±‚æ“ä½œã€‚ä¸»è¦ç”¨äºåœ¨ä¸¤ä¸ªé€šä¿¡åº”ç”¨ä¹‹é—´æä¾›ä¿å¯†æ€§å’Œæ•°æ®å®Œæ•´æ€§çš„å®‰å…¨åè®®ã€‚å®ƒå¹¿æ³›ç”¨äºäº’è”ç½‘é€šä¿¡å’Œåœ¨çº¿æ•°æ®ä¼ è¾“ï¼Œå°¤å…¶æ˜¯åœ¨Webæµè§ˆã€ç”µå­é‚®ä»¶ã€å³æ—¶é€šè®¯å’Œå…¶ä»–æ•°æ®äº¤æ¢çš„åº”ç”¨ä¸­ã€‚
    - TLS Recordæ˜¯ TLS çš„åº•å±‚åè®®ï¼Œè´Ÿè´£å°è£…ä¸åŒçš„é«˜å±‚åè®®æ•°æ®ã€‚å®ƒä¸ºä¼ è¾“æä¾›ä¸¤ä¸ªåŸºæœ¬æœåŠ¡ï¼šä¿å¯†æ€§å’Œæ•°æ®å®Œæ•´æ€§ã€‚
    - TLS æ¡æ‰‹åè®®æ˜¯å»ºç«‹ TLS è¿æ¥æ—¶æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œç”¨äºåœ¨ä¸¤ä¸ªé€šä¿¡ç«¯ä¹‹é—´åå•†åŠ å¯†ç®—æ³•ï¼ŒéªŒè¯å¯¹æ–¹èº«ä»½ï¼Œå¹¶äº¤æ¢å¯†é’¥ä¿¡æ¯ã€‚è¿™ä¸€è¿‡ç¨‹å‘ç”Ÿåœ¨å‘é€ä»»ä½•å®é™…åº”ç”¨æ•°æ®ä¹‹å‰ã€‚
- Layer 7 & HTTP/HTTPS 
    - HTTP ä½¿ç”¨UDP
    - HTTPSï¼ˆæœ€åä¸€ä¸ªSä»£è¡¨Secureï¼‰ ä½¿ç”¨TLSæˆ–SSLã€‚
# Hosting
åœ¨ç½‘ç»œæ¶æ„ä¸­ï¼ŒProxyæ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå®ƒä½œä¸ºå®¢æˆ·ç«¯å’Œå…¶ä»–æœåŠ¡å™¨ä¹‹é—´çš„ä¸­ä»‹ã€‚æ ¹æ®å…¶é…ç½®å’Œç”¨é€”çš„ä¸åŒï¼Œä»£ç†å¯ä»¥è¢«åˆ†ç±»ä¸ºForward Proxyå’ŒReverse Proxyã€‚

ç®€å•æ¥è®²ï¼ŒForward Proxyè¢«çœ‹ä½œæ˜¯å®¢æˆ·ç«¯ï¼Œä»£è¡¨ç”¨æˆ·å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼›Reverse Proxyè¢«çœ‹ä½œæ˜¯æœåŠ¡ç«¯ï¼Œå®é™…æ˜¯å°†è¯·æ±‚è½¬å‘åˆ°åç«¯æœåŠ¡å™¨ï¼Œå†æŠŠæœåŠ¡å™¨çš„å“åº”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚

å¦‚ä½•ç”Ÿæˆä¸€ä¸ªself-signed certificate?
```shell
$ openssl req -x509 -nodes -days 365 -newkey rsa:2048 -out selfsigned.crt -keyout private.key -subj "/C=UK/ST=Merseyside/L=Liverpool/O=MyOrg/CN=www.example.com"
```
# Storage
storage solutionsåˆ†ä¸ºä»¥ä¸‹ä¸‰ç§
1. **Local Server Storage**: æœ¬åœ°æœåŠ¡å­˜å‚¨æŒ‡çš„æ˜¯æœåŠ¡å™¨ä¸Šçš„ç¡¬ä»¶é©±åŠ¨ï¼Œè¿™æä¾›äº†å¿«é€Ÿçš„è®¿é—®é€Ÿåº¦ã€‚ä½†æ˜¯è¿™ä¸é€‚åˆäº‘åº”ç”¨ï¼Œå› ä¸ºä¸€æ—¦ä¸€ä¸ªæœåŠ¡å™¨å®•æœºï¼Œæˆ‘ä»¬éœ€è¦é‡èµ·ä¸€ä¸ªæ–°çš„ä¸»æœºï¼Œä½†æ˜¯æ–°çš„ä¸»æœºæ— æ³•è®¿é—®è¿™äº›æ•°æ®
2. **Network Attached Storage (NAS)**: NASåœ¨ä¸€ä¸ªRAID(æ•°æ®å­˜å‚¨è™šæ‹ŸåŒ–æŠ€æœ¯)é…ç½®ä¸­æœ‰å¤šä¸ªç¡¬ç›˜é©±åŠ¨ï¼Œä»–ä»¬ä½œä¸ºå…±äº«é©±åŠ¨æ¥è¢«è®¿é—®ã€‚NASçš„ä¸»è¦ç¼ºç‚¹æ˜¯å¦‚æœå•ä¸ªç»„ä»¶å®•æœºï¼Œæ‰€æœ‰æ•°æ®éƒ½æ— æ³•è®¿é—®ã€‚
3. **Storage Area Network (SAN)**: å­˜å‚¨æ•°æ®çš„è®¡ç®—æœºç½‘ç»œï¼Œç”±å¤šä¸ªç£ç›˜é˜µåˆ—ï¼Œç½‘ç»œäº¤æ¢æœºå’ŒæœåŠ¡å™¨ç»„æˆã€‚è¿™ç§æ–¹å¼å…·å¤‡å®¹é”™ç‡ï¼Œå› ä¸ºæ•°æ®è¢«å¤åˆ¶å­˜å‚¨åœ¨å‡ ä¸ªç£ç›˜é˜µåˆ—ä¸Šï¼Œå¦‚æœæŸä¸ªç£ç›˜å®•æœºï¼Œæ•°æ®ä»ç„¶èƒ½è¢«è®¿é—®ã€‚å®¹æ˜“æ‰©å±•ï¼Œæ·»åŠ é¢å¤–çš„å­˜å‚¨ä¸ä¼šä¸­æ–­SANã€‚

æ•°æ®åº“
1. å…³ç³»å‹æ•°æ®åº“
2. NoSQLæ•°æ®åº“
3. å›¾æ•°æ®åº“ï¼šæ¯ä¸ªèŠ‚ç‚¹å’Œè¾¹éƒ½èƒ½å­˜å‚¨ä»»æ„æ•°é‡çš„attributesã€‚èŠ‚ç‚¹è¡¨ç¤ºentitiesï¼Œè¾¹è¡¨ç¤ºentitiesä¹‹é—´çš„å…³ç³»ã€‚
4. Neo4jï¼šè¿™æ˜¯ä¸€æ¬¾éå¸¸æµè¡Œçš„å›¾æ•°æ®åº“ã€‚Neo4jä½¿ç”¨çš„æ£€ç´¢è¯­è¨€å«åšCypherã€‚
    - ``` CREATE (ee:Person {name: 'Emil', from: 'Sweden', kloutScore: 99})```
    - eeæ˜¯èŠ‚ç‚¹å˜é‡ï¼ŒPersonæ˜¯èŠ‚ç‚¹æ ‡ç­¾ï¼Œ{}åŒ…å«äº†æè¿°èŠ‚ç‚¹çš„æ€§è´¨
    - ``` MATCH (ee:Person) WHERE ee.name = 'Emil' RETURN ee;```
# Typescript
## åŸºæœ¬ç±»å‹
anyç±»å‹ä¼šç»•è¿‡ç³»ç»Ÿçš„ç±»å‹æ£€æŸ¥ï¼Œä½†æ˜¯è¿‡åº¦ä½¿ç”¨anyå¯èƒ½ä¼šé€ æˆé”™è¯¯ä»£ç éš¾ä»¥è¿½è¸ªã€‚unknownæ˜¯anyçš„æ›´å®‰å…¨ç‰ˆæœ¬ï¼Œå› ä¸ºæ›´ä¸¥æ ¼ï¼Œunknownç±»å‹æ™ºèƒ½ç”¨äº==, ===, !=, !==ï¼Œé™¤æ­¤ä»¥å¤–éƒ½ä¸å¯ä»¥ï¼Œä¾‹å¦‚ä¸‹é¢ä»£ç å°±ä¼šæŠ¥é”™
```typescript
let a: unknown = 30;
let c = a + 10; //è¿™é‡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºunknownç±»å‹ä¸æ”¯æŒ+
```
boolç±»å‹çš„å‡ ç§å£°æ˜æ–¹å¼
```typescript
let d: boolean = true
let e: true = true //è¿™ç§å£°æ˜åï¼Œä»¥ååªèƒ½æ˜¯trueï¼Œä¸èƒ½ä¿®æ”¹ã€‚
```
numberç±»å‹çš„å‡ ç§å£°æ˜æ–¹å¼
```typescript
let a: number = 10;
let b: 26.187 = 26.187;
let c: 50 = 40; // Error TS2322: Type '50' is not assignable to type '40'
```
bigintç±»å‹çš„å‡ ç§å£°æ˜æ–¹å¼ï¼Œè¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šnåç¼€è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªbigintç±»å‹çš„æ•°å€¼ï¼Œè€Œä¸æ˜¯æ™®é€šçš„numberç±»å‹ã€‚100nè¡¨ç¤ºæ•°å€¼ä¸€ç™¾ã€‚
```typescript
let a = 1234n;
let b: bigint = 100n;
let c = 88.5n; //Error TS1353: A bigint literal must be an integer
```
symbolç±»å‹çš„å‡ ç§å£°æ˜æ–¹å¼ã€‚æ¯æ¬¡è°ƒç”¨```Symbol()```éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ã€å”¯ä¸€çš„symbolã€‚ä½ å¯ä»¥é€‰æ‹©æ€§åœ°ç»™```Symbol()```å‡½æ•°ä¼ é€’ä¸€ä¸ªæè¿°å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¹¶ä¸å½±å“ symbol çš„å”¯ä¸€æ€§ã€‚
```typescript
let a: symbol = Symbol('a')
let sym1 = Symbol("key1");
let sym2 = Symbol("key1");

console.log(sym1 === sym2);  // è¾“å‡ºï¼šfalse
```
## å¯¹è±¡ç±»å‹
```typescript
let a: object = {
    b: 'x'
}
console.log(a['b'])

// è¿™éƒ¨åˆ†å£°æ˜äº†ä¸€ä¸ªå˜é‡cï¼Œå¹¶ä¸”æŒ‡å®šäº†cçš„ç±»å‹ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡çš„ç»“æ„è¢«æ˜ç¡®å®šä¹‰ï¼šå®ƒå¿…é¡»åŒ…å«ä¸€ä¸ªé”®dï¼Œä¸”è¯¥é”®çš„å€¼ç±»å‹ä¸ºstring
let c: { d : string } = {
    d: 'y'
}
console.log(c.d)

// ä¸¤ç§å®¹æ˜“ç¢°åˆ°çš„æŠ¥é”™æƒ…å†µ
let a: { b: number }
a = {} // æŠ¥é”™ï¼Œä¸èƒ½å£°æ˜ä¸€ä¸ªç©ºå¯¹è±¡
a = {
    b: 1,
    c: 2 // æŠ¥é”™ï¼Œå£°æ˜çš„æ—¶å€™æ²¡æœ‰cï¼Œæ‰€ä»¥ä¼šåœ¨cè¿™ä¸ªä½ç½®æŠ¥é”™
}
```
é‚£ä¹ˆä¸ç¡®å®šæ˜¯ä¸ªå‚æ•°æ˜¯å¦éœ€è¦ï¼Œæˆ–è€…è°ƒç”¨çš„æ—¶å€™ä¸ä¸€å®šä¼šä¼ å…¥ï¼Œæ€ä¹ˆåšï¼Ÿ
```typescript
let a: {
    b: number
    c?: string
    [key: number]: boolean
}
a = {b: 1, 10: true}
a = {b: 1, c: 'd', 10: true}
```
å£°æ˜çš„æ—¶å€™è¿˜å¯ä»¥å§å˜é‡å†™æˆreadonlyï¼Œè¿™æ„å‘³ç€ä¸€æ—¦åˆå§‹åŒ–åï¼Œå°±æ— æ³•å†æ¬¡ä¿®æ”¹
```typescript
let user: {
    readonly firstName: string
} = {
    firstName: 'abby'
}

user.firstName = 'martin' // æŠ¥é”™
```
## Aliases, Unions, Intersections
```typescript
type Age = number
type Person = {
    name: string,
    age: Age
}
type Cat = {
    name: string,
    purrs: boolean
}
type Dog = {
    name: string,
    barks: boolean,
    wags: boolean
}
type CatOrDog = Cat | Dog
type CatAndDog = Cat & Dog
let b: CatAndDog = {
    name: 'martin',
    barks: false,
    purrs: false,
    wags: false,
}
// bæ˜¯catå’Œdogçš„intersectionï¼Œæ‰€ä»¥è¦æœ‰catå’Œdogçš„å…¨éƒ¨å±æ€§
```
## Array
æ•°ç»„çš„ç±»å‹æ£€æŸ¥
```typescript
let f = ['red']
f.push('blue')
f.push(true) // error

let g = []
g.push(1)
g.push('red')
g.push({x: "y"}) // ä»»ä½•ç±»å‹éƒ½èƒ½å­˜å…¥g

let h: number[] = []
h.push(1)
h.push('red') // error, å‰é¢å·²ç»å£°æ˜äº†åªèƒ½å­˜numberç±»å‹
```
## Tuples
```typescript
// rest elements
let list : [number, boolean, ...string[]] = [1, false, 'a', 'b', 'c']
```
## Function
ç”¨...æ¥æ”¶ä»»æ„æ•°é‡çš„å‚æ•°
```typescript
function sumVariadicSafe(...numbers: number[]): number {
    return number.reduce((total, n) => total + n, 0)
}
sumVariadicSafe(1, 2, 3) // è¾“å‡º6
```
å‡½æ•°çš„type aliases
```typescript
type log = (message: string, userId?: string) => void
let log: Log = (
    message,
    userId = 'Not signed in'
) => {
    let time = new Date().toISOString()
    console.log(time, message, userId)
}
```
## Generic Types(æ³›å‹)
```typescript
type Filter = {
    <T>(array: T[], f: (item: T) => boolean): T[]
}
let myFilter: Filter = (array, f) => array.filter(f)

// use myFilter function
console.log(myFilter([1, 2, 3], _ => _ > 2)) // output is 3
console.log(myFilter(['a', 'b'], _ => _ !== 'b')) // output is ['a']
let names = [
    {firstName: 'Beth'},
    {firstName: 'Caitlin'},
    {firstName: 'Xian'}
]
console.log(myFilter(names, _ => _.firstName.startsWith('B'))) // output is [{firstName: 'Beth'}]
```
æ³›å‹å®šä¹‰çš„å‡ ç§æ–¹å¼
```typescript
type Filter1 = {
    <T>(array: T[], f: (item: T) => boolean): T[]
}
type Filter2<T> = {
    (array: T[], f: (item: T) => boolean): T[]
}
// ä¸åŒåœ¨äºFilter2ä¼šé™åˆ¶ç±»å‹
```
mapå‡½æ•°å®šä¹‰å°±æ˜¯ä¸€ä¸ªæ³›å‹å‡½æ•°ï¼ŒæŠŠTç±»å‹çš„æ•°ç»„è½¬æ¢æˆUç±»å‹çš„æ•°ç»„
```typescript
function map<T, U>(array: T[], f: (item: T) => U): U[] {
    let result = []
    for (let i = 0; i < array.length; i++){
        result[i] = f(array[i])
    }
    return result
}
```
## Classes
ä»¥å›½é™…è±¡æ£‹â™Ÿï¸è¿™ä¸ªæ¸¸æˆä¸ºä¾‹
```typescript
class Game{}
class Piece{}
class Position{}

class King extends Piece{}
class Queen extends Piece{}
class Bishop extends Piece{} // è±¡
class Knight extends Piece{} // é©¬
class Rook extends Piece{} // è½¦
class Pawn extends Piece{} // å…µ

type Color = 'Black' | 'White' //é»‘ç™½ä¸¤æ–¹
type FileVal = 'A'|'B'|'C'|'D'|'E'|'F'|'G'|'H' // 8åˆ—
type RankVal = 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 // 8è¡Œ

class Position {
    constructor(
        private file: FileVal,
        private rank: RankVal,
    ){}
    distanceFrom(position: Position) {
        return {
            rank: Math.abs(position.rank - this.rank),
            file: Math.abs(position.file.charCodeAt(0) - this.file.charCodeAt(0)) // å› ä¸ºfileæ˜¯ç”¨å­—æ¯è¡¨ç¤ºçš„ï¼Œæ‰€ä»¥è¦UniCodeç ç›¸å‡ã€‚
        }
    }
}

class Piece {
    protected position: Position // protectedç±»å‹å¯ä»¥åœ¨æœ¬ç±»æˆ–å­ç±»ä¸­è¢«è®¿é—®
    constructor(
        private readonly color: Color,
        file: FileVal,
        rank: RankVal
    ) {
        this.position = new Position(file, rank)
    }
}

// abstract classï¼Œå¯ä»¥å®ç°æ–¹æ³•æˆ–è€…æŠ½è±¡æ–¹æ³•ï¼ŒæŠ½è±¡ç±»ä¸èƒ½è¢«ç›´æ¥å®ä¾‹åŒ–ï¼Œå­ç±»ï¼ˆéæŠ½è±¡ç±»ï¼‰å¯ä»¥è¢«å®ä¾‹åŒ–
abstract class Piece {
    moveTo(position: Position) {
        this.position = position
    }
    abstract canMoveTo(position: Position): boolean
}

// æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ä¸€å®šè¦åœ¨éæŠ½è±¡å­ç±»ä¸­å®ç°
class King extends Piece {
    canMoveTo(position: Position) {
        let distance = this.position.distanceFrom(position)
        return distance.rank < 2 && distance.file < 2
    }
}

// å¯¹äºä¸€ä¸ªç±»ï¼Œå…¶ä¸­çš„staticæ–¹æ³•åªè¢«åˆ›å»ºä¸€æ¬¡ï¼Œè€Œä¸æ˜¯æ¯æ¬¡å®ä¾‹åŒ–å¯¹è±¡éƒ½è¢«åˆ›å»ºä¸€æ¬¡ã€‚
class Game {
    private pieces = Game.makePieces()
    private static makePieces() {
        return [
            new King('White', 'E', 1),
            ...
        ]
    }
}


```
## Interfaces
æ¥å£æä¾›äº†å¦ä¸€ç§å®šä¹‰å¯¹è±¡çš„æ–¹å¼
```typescript
type Sushi = {
    calories: number
    salty: boolean
    tasty: boolean
}
// ç­‰ä»·äº
interface Sushi {
    calories: number
    salty: boolean
    tasty: boolean
}
```
å‰é¢è¯´è¿‡typeå¯ä»¥è¿›è¡Œintersectionæˆ–unionã€‚interfaceä¹Ÿå¯ä»¥åšåˆ°
```typescript
type Food = {
    calories: number
    tasty: boolean
}
type Sushi = Food & {salty: boolean}

interface Food {
    calories: number
    tasty: boolean
}
interface Sushi extends Food {
    salty: boolean
}
```
classå¯ä»¥å®ç°æ¥å£ï¼Œä¸¾ä¾‹ï¼š
```typescript
interface Animal {
    eat(food: string): void
    sleep(hours: number): void
}

interface Feline {
    meow(): void
}

class Cat implements Animal {
    eat(food: string) {
        console.info('Ate some', food, '. Mmm!')
    }
    sleep(hours: number) {
        console.info('Slept for', hours, 'hours')
    }
}

// ç±»ä¹Ÿå¯ä»¥å®ç°å¤šä¸ªæ¥å£
class Cat implements Animal, Feline {
    // ...
}
```
# Kubernetes
K8sï¼Œæ˜¯ä¸€ä¸ªå¼€æºçš„å®¹å™¨ç¼–æ’ç³»ç»Ÿï¼Œç”¨äºè‡ªåŠ¨åŒ–è®¡ç®—æœºåº”ç”¨çš„éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†ã€‚

æœ€æµè¡Œçš„å®¹å™¨ç¼–æ’è½¯ä»¶å°±æ˜¯Kubernetesï¼Œå®ƒåœ¨æ•°æ®ä¸­å¿ƒæœåŠ¡å™¨ä¸Šè¿è¡Œï¼ŒæŠ½è±¡æ‰äº†åº•å±‚ç¡¬ä»¶çš„å¤æ‚æ€§ï¼Œä¸ºè¿è¡Œå®¹å™¨æä¾›äº†ä¸€ä¸ªç®€å•çš„æ¥å£ã€‚æ­£å› å¦‚æ­¤ï¼ŒK8sç»å¸¸è¢«æ¯”ä½œæ•°æ®ä¸­å¿ƒçš„æ“ä½œç³»ç»Ÿã€‚
## Kubernetes
K8sæœ€åˆä½¿ç”¨Dockerä½œä¸ºä»–çš„å®¹å™¨è¿è¡Œæ—¶ã€‚
### CRI & OCI
CRIå…¨ç§°Container Runtime Interfaceï¼ŒOCIå…¨ç§°Open Container Initiative standard

CRIæ˜¯ä¸€ç§æ’ä»¶æ¥å£ï¼Œå®ƒä½¿Kubernetesèƒ½å¤Ÿä¸å„ç§å®¹å™¨è¿è¡Œæ—¶è¿›è¡Œé€šä¿¡å’Œç®¡ç†ã€‚CRI æä¾›äº†ä¸€ä¸ªæ¸…æ™°çš„ç•Œé¢ï¼Œä½¿å¾—Kuberneteså¯ä»¥æ”¯æŒå¤šç§å®¹å™¨è¿è¡Œæ—¶ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡æ·»åŠ æˆ–æ›´æ–°è¿è¡Œæ—¶éƒ½ä¿®æ”¹Kubernetesçš„æ ¸å¿ƒä»£ç ã€‚è¿™æå¤§åœ°æé«˜äº†Kubernetesçš„æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤æ€§ã€‚

OCIæ˜¯ä¸€ä¸ªè‡´åŠ›äºåˆ›å»ºå¼€æ”¾çš„å®¹å™¨æ ¼å¼å’Œè¿è¡Œæ—¶æ ‡å‡†çš„é¡¹ç›®ã€‚OCIæˆç«‹çš„ç›®çš„æ˜¯ä¸ºäº†ä¿è¯å®¹å™¨çš„å¼€æ”¾æ€§å’Œå¯ç§»æ¤æ€§ï¼Œä½¿å¾—åŸºäºå®¹å™¨çš„æŠ€æœ¯å¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒå’Œå¹³å°ä¹‹é—´æ— ç¼è¿è¡Œï¼Œæ— è®ºæ˜¯ç‰©ç†æœåŠ¡å™¨ã€è™šæ‹Ÿæœºã€ç§æœ‰äº‘è¿˜æ˜¯å…¬æœ‰äº‘ã€‚
### å¾®æœåŠ¡å’Œå•ä½“æ¶æ„(Microservices & Monoliths)
å•ä½“æ¶æ„æ˜¯ä¸€ç§ä¼ ç»Ÿçš„è½¯ä»¶å¼€å‘æ¨¡å¼ï¼Œå…¶ä¸­åº”ç”¨çš„æ‰€æœ‰åŠŸèƒ½éƒ½è¢«é›†æˆåˆ°ä¸€ä¸ªå•ä¸€çš„ã€ç‹¬ç«‹çš„éƒ¨ç½²å•å…ƒä¸­ã€‚åœ¨è¿™ç§æ¶æ„ä¸­ï¼Œåº”ç”¨çš„å®¢æˆ·ç«¯ç•Œé¢ã€åç«¯é€»è¾‘å’Œæ•°æ®åº“è®¿é—®éƒ½æ„æˆäº†ä¸€ä¸ªç´§å¯†è€¦åˆçš„å•ä¸€ä»£ç åº“ã€‚æ–¹ä¾¿éƒ¨ç½²è¿ç»´ï¼Œä½†æ˜¯æ‰©å±•æ€§é¦–é™

å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§å°†åº”ç”¨åˆ†è§£ä¸ºä¸€ç»„è¾ƒå°ã€ç‹¬ç«‹æœåŠ¡çš„æ–¹æ³•ï¼Œæ¯ä¸ªæœåŠ¡æ‰§è¡Œåº”ç”¨çš„ä¸€ä¸ªå…·ä½“åŠŸèƒ½ï¼Œå¹¶ä¸”ç‹¬ç«‹éƒ¨ç½²ã€‚æ¯ä¸ªå¾®æœåŠ¡é€šå¸¸å›´ç»•ä¸šåŠ¡èƒ½åŠ›æ„å»ºï¼Œè¿è¡Œåœ¨è‡ªå·±çš„è¿›ç¨‹ä¸­ï¼ŒæœåŠ¡ä¹‹é—´é€šå¸¸é€šè¿‡ç½‘ç»œè°ƒç”¨è¿›è¡Œé€šä¿¡ã€‚çµæ´»å¯æ‰©å±•ï¼Œè€Œä¸”å•ä¸ªæœåŠ¡çš„å¤±è´¥ä¸ä¼šå½±å“æ•´ä¸ªåº”ç”¨ã€‚

K8sé›†ç¾¤ç”±ä¸€ç»„æœºå™¨ï¼ˆèŠ‚ç‚¹ï¼‰ç»„æˆï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½è¿è¡Œå®¹å™¨åŒ–çš„åº”ç”¨ã€‚èŠ‚ç‚¹æœ‰ä¸¤ç§ç±»å‹ï¼šcontrol planeå’Œworker nodesã€‚control planeè´Ÿè´£ç®¡ç†é›†ç¾¤ï¼Œworker nodesè´Ÿè´£è¿è¡Œå®¹å™¨ã€‚
K8sé›†ç¾¤æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤º
![Hypervisor](/img/comp315/k8s.png)
### Control Plane
Control PlaneåŒ…å«ä»¥ä¸‹ç»„ä»¶
- API Serverç›¸å½“äºcontrol planeçš„å‰ç«¯ï¼Œæš´éœ²ä¸€ä¸ªRESTful APIã€‚ç”¨æˆ·ä½¿ç”¨è¿™ä¸ªAPIå’Œé›†ç¾¤äº¤äº’ï¼Œå†…éƒ¨ä¹Ÿç”¨è¿™ä¸ªAPIæ¥å½¼æ­¤é€šä¿¡ã€‚
- Cluster Storeæ˜¯ä¸€ä¸ªé”®å€¼å­˜å‚¨ï¼Œç®¡ç†é›†ç¾¤çš„çŠ¶æ€ã€‚K8sä¸­æœ€å¸¸ç”¨çš„Cluster storeå°±æ˜¯etcsï¼Œä¸€ä¸ªé«˜å¯ç”¨é”®å€¼å­˜å‚¨ã€‚
- Schedulerè°ƒåº¦ä½œä¸šï¼Œå®ƒä¼šè€ƒè™‘ä¸€ä¸ªä»»åŠ¡çš„èµ„æºéœ€æ±‚ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šå¯ç”¨çš„èµ„æºé‡ï¼Œå¦‚æœæ‰¾ä¸åˆ°æ»¡è¶³éœ€æ±‚çš„èŠ‚ç‚¹ï¼Œä»»åŠ¡ä¼šæŒç»­pendingç›´åˆ°æœ‰åˆé€‚çš„èŠ‚ç‚¹å‡ºç°ã€‚pendingçŠ¶æ€çš„ä»»åŠ¡èƒ½è§¦å‘é›†ç¾¤ä¸­èŠ‚ç‚¹æ•°é‡çš„æå‡ã€‚
- Controllerså¤„ç†é›†ç¾¤ä¸­çš„ä¾‹è¡Œä»»åŠ¡ï¼Œä¸€äº›ä¸»è¦çš„controller
    - Deployment controller
    - StatefulSet controller
    - ReplicaSet controller
- Controller Managerç®¡ç†Controllers
### Worker Nodes
Worker nodeså¯ä»¥å¤„ç†å®¹å™¨çš„æ‰§è¡Œã€‚å®ƒåŒ…å«ä»¥ä¸‹ç»„ä»¶
- kubelet: è¿™æ˜¯è¿è¡Œåœ¨æ‰€æœ‰ Kubernetes èŠ‚ç‚¹ä¸Šçš„ä¸»è¦èŠ‚ç‚¹ä»£ç†ã€‚å®ƒè´Ÿè´£å¯åŠ¨ã€åœæ­¢å’Œç®¡ç†å®¹å™¨ï¼ˆé€šè¿‡å®¹å™¨è¿è¡Œæ—¶ï¼‰ã€ç»´æŠ¤å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸã€æ‰§è¡Œå¦‚å¥åº·æ£€æŸ¥ä¹‹ç±»çš„æ“ä½œï¼Œå¹¶ä¸ Kubernetes çš„æ§åˆ¶å¹³é¢é€šä¿¡ï¼Œä»¥æŠ¥å‘ŠèŠ‚ç‚¹ä¸Šçš„èµ„æºä½¿ç”¨æƒ…å†µå’ŒçŠ¶æ€ä¿¡æ¯ã€‚
- Container runtimes: è¿™æ˜¯å®é™…è¿è¡Œå®¹å™¨çš„è½¯ä»¶ã€‚Kubernetes æœ¬èº«ä¸ç›´æ¥åˆ›å»ºæˆ–è¿è¡Œå®¹å™¨ï¼Œè€Œæ˜¯ä¾èµ–å®¹å™¨è¿è¡Œæ—¶ã€‚å¸¸è§çš„å®¹å™¨è¿è¡Œæ—¶åŒ…æ‹¬ Dockerã€containerd å’Œ CRI-Oã€‚è¿™äº›è¿è¡Œæ—¶è´Ÿè´£é•œåƒç®¡ç†å’Œå®¹å™¨æ‰§è¡Œã€‚
- Apkube Proxy: è¿è¡Œåœ¨æ¯ä¸€ä¸ªworker nodeä¸Šï¼Œç»™èŠ‚ç‚¹æä¾›ç½‘ç»œã€‚

## Canary releases
Canary releases æ˜¯ä¸€ç§è½¯ä»¶å‘å¸ƒç­–ç•¥ï¼Œç›®çš„æ˜¯é€šè¿‡å°†æ–°ç‰ˆæœ¬è½¯ä»¶æ¨é€åˆ°ä¸€å°éƒ¨åˆ†ç”¨æˆ·ä¸­ï¼Œæ¥æµ‹è¯•å…¶æ€§èƒ½å’Œç¨³å®šæ€§ã€‚è¿™ç§ç­–ç•¥å¯ä»¥å¸®åŠ©å¼€å‘å›¢é˜Ÿè¯†åˆ«å’Œè§£å†³æ½œåœ¨çš„é—®é¢˜ï¼Œè€Œä¸ä¼šå½±å“åˆ°æ‰€æœ‰ç”¨æˆ·ã€‚

## Set up Kubernetes Cluster
ç”±äºkubeadmå·¥å…·çš„å­˜åœ¨ï¼ŒKubernetesé›†ç¾¤å¾ˆå®¹æ˜“è®¾ç½®ï¼Œæœ‰ä¸¤ç§æŒ‡ä»¤æ¥åˆå§‹åŒ–
- ```kubeadm init```è¿™ä¸ªå‘½ä»¤åˆå§‹åŒ–Kubernetes control-plane nodeã€‚
- ```kubeadm join```è¿™ä¸ªå‘½ä»¤åˆå§‹åŒ–Kubernetes worker nodeå¹¶æŠŠå®ƒåŠ å…¥é›†ç¾¤ã€‚
## ç¦ç”¨Swapå’ŒSELinux
åœ¨Linuxä¸­ï¼Œswap spaceï¼ˆäº¤æ¢ç©ºé—´ï¼‰æ˜¯ç¡¬ç›˜ä¸Šçš„ä¸€éƒ¨åˆ†ç©ºé—´ï¼Œç”¨ä½œå½“ç‰©ç†å†…å­˜ï¼ˆRAMï¼‰ä½¿ç”¨å®Œæ—¶çš„å¤‡ç”¨å­˜å‚¨ã€‚å½“ç³»ç»Ÿçš„RAMè¢«å®Œå…¨ä½¿ç”¨æ—¶ï¼Œè¾ƒå°‘ä½¿ç”¨çš„æ•°æ®å¯ä»¥è¢«ä¸´æ—¶è½¬ç§»åˆ°swapç©ºé—´ï¼Œä»è€Œä¸ºéœ€è¦æ›´é¢‘ç¹è®¿é—®çš„æ•°æ®è…¾å‡ºç©ºé—´ã€‚Kubernetesä¸æ”¯æŒäº¤æ¢ç©ºé—´çš„å­˜åœ¨ï¼Œå¦‚æœæ£€æµ‹åˆ°äº¤æ¢å†…å­˜ï¼Œkubeletsä¼šå¤±è´¥ã€‚

å¦‚ä½•åœ¨masterå’Œworker nodesä¸Šç¦ç”¨SELinux? éœ€è¦ç¼–è¾‘/etcé…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹æˆ```SELINUX=disabled```

```reboot```å‘½ä»¤ç”¨æ¥é‡æ–°å¯åŠ¨ç³»ç»Ÿä½¿ä¸€äº›æ”¹åŠ¨ç”Ÿæ•ˆã€‚
# React

# Next.js
## Rendering

## Routing in Next.js

