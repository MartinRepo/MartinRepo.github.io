<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>强化学习 | Martin&#39;s space</title>
<meta name="keywords" content="RL">
<meta name="description" content="多臂老虎机问题(MAB) 问题定义 问题核心(Explore-exploit dilemma) 问题算法 $\epsilon$- greedy Action Selection Upper Confidence Bound (UCB) 马尔可夫决策过程(MDPs) 理论框架 核心数">
<meta name="author" content="Martin">
<link rel="canonical" href="https://martinspace.top/zh/rl-note/">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <meta name="referrer" content="no-referrer-when-downgrade">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bc3e848411f8e2e3b39fd084e8d998d9f2d9782118c440525c90992eaecdc9f0.css" integrity="sha256-vD6EhBH44uOzn9CE6NmY2fLZeCEYxEBSXJCZLq7NyfA=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://martinspace.top/img/icebear.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="https://martinspace.top/img/icebear.jpg">
<link rel="icon" type="image/png" sizes="32x32" href="https://martinspace.top/img/icebear.jpg">
<link rel="apple-touch-icon" href="https://martinspace.top/icebear.jpg">
<link rel="mask-icon" href="https://martinspace.top/icebear.jpg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://martinspace.top/zh/rl-note/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.1.0/style.css" />
<script>
        MathJax = {
          tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
          },
          svg: {
            fontCache: 'global'
          }
        };
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J8TFFL1ZS7"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-J8TFFL1ZS7', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="强化学习" />
<meta property="og:description" content="多臂老虎机问题(MAB) 问题定义 问题核心(Explore-exploit dilemma) 问题算法 $\epsilon$- greedy Action Selection Upper Confidence Bound (UCB) 马尔可夫决策过程(MDPs) 理论框架 核心数" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://martinspace.top/zh/rl-note/" />
<meta property="og:image" content="https://martinspace.top/zh/rl-note/img/rl-note/whatisrl.png" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2025-02-01T10:39:49+00:00" />
<meta property="article:modified_time" content="2025-02-01T10:39:49+00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://martinspace.top/zh/rl-note/img/rl-note/whatisrl.png" />
<meta name="twitter:title" content="强化学习"/>
<meta name="twitter:description" content="多臂老虎机问题(MAB) 问题定义 问题核心(Explore-exploit dilemma) 问题算法 $\epsilon$- greedy Action Selection Upper Confidence Bound (UCB) 马尔可夫决策过程(MDPs) 理论框架 核心数"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "📒 文章",
      "item": "https://martinspace.top/zh/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "🔬 研究记录",
      "item": "https://martinspace.top/zh/post/2tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "强化学习",
      "item": "https://martinspace.top/zh/rl-note/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "强化学习",
  "name": "强化学习",
  "description": "多臂老虎机问题(MAB) 问题定义 问题核心(Explore-exploit dilemma) 问题算法 $\\epsilon$- greedy Action Selection Upper Confidence Bound (UCB) 马尔可夫决策过程(MDPs) 理论框架 核心数",
  "keywords": [
    "RL"
  ],
  "articleBody": "多臂老虎机问题(MAB) 问题定义 问题核心(Explore-exploit dilemma) 问题算法 $\\epsilon$- greedy Action Selection Upper Confidence Bound (UCB) 马尔可夫决策过程(MDPs) 理论框架 核心数学概念\u0026函数 Policy Returns Value Functions Bellman Equation 动态规划 Policy Iteration Iterative policy evaluation Policy Improvement Value Iteration Asynchronous and generalised DP 蒙特卡洛方法 ",
  "wordCount" : "109",
  "inLanguage": "zh",
  "image":"https://martinspace.top/zh/rl-note/img/rl-note/whatisrl.png","datePublished": "2025-02-01T10:39:49Z",
  "dateModified": "2025-02-01T10:39:49Z",
  "author":[{
    "@type": "Person",
    "name": "Martin"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://martinspace.top/zh/rl-note/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Martin's space",
    "logo": {
      "@type": "ImageObject",
      "url": "https://martinspace.top/img/icebear.jpg"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>



<script async src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>


<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://martinspace.top/zh/" accesskey="h" title="Martin&#39;s space (Alt + H)">
                <img src="https://martinspace.top/icebear.jpg" alt="" aria-label="logo"
                    height="35">Martin&#39;s space</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://martinspace.top/en/" title="English"
                            aria-label="English">English</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://martinspace.top/zh/" title="🏠 主页">
                    <span>🏠 主页</span>
                </a>
            </li>
            <li>
                <a href="https://martinspace.top/zh/archives/" title="📁 归档">
                    <span>📁 归档</span>
                </a>
            </li>
            <li>
                <a href="https://martinspace.top/zh/tags" title="🏷️ 标签">
                    <span>🏷️ 标签</span>
                </a>
            </li>
            <li>
                <a href="https://martinspace.top/zh/search" title="🔍 搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍 搜索</span>
                </a>
            </li>
            <li>
                <a href="https://martinspace.top/zh/about" title="💭 关于">
                    <span>💭 关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://martinspace.top/zh/">主页</a>&nbsp;»&nbsp;<a href="https://martinspace.top/zh/post/">📒 文章</a>&nbsp;»&nbsp;<a href="https://martinspace.top/zh/post/2tech/">🔬 研究记录</a></div>
    <h1 class="post-title">
      强化学习
    </h1>
    <div class="post-meta">










创建: 2025-02-01 | 更新: 2025-02-01 | 字数: 109字 | 阅读时长: 1分钟 | 
作者:Martin&nbsp;|&nbsp;标签: &nbsp;
    <ul class="post-tags-meta">
        <a href="https://martinspace.top/zh/tags/rl/">RL</a>
    </ul>


    
    </div>
  </header> 
<figure class="entry-cover1"><img loading="lazy" src="https://martinspace.top/img/rl-note/whatisrl.png" alt="what-is-rl">
        
</figure><aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#%e5%a4%9a%e8%87%82%e8%80%81%e8%99%8e%e6%9c%ba%e9%97%ae%e9%a2%98mab" aria-label="多臂老虎机问题(MAB)">多臂老虎机问题(MAB)</a><ul>
                            
                    <li>
                        <a href="#%e9%97%ae%e9%a2%98%e5%ae%9a%e4%b9%89" aria-label="问题定义">问题定义</a></li>
                    <li>
                        <a href="#%e9%97%ae%e9%a2%98%e6%a0%b8%e5%bf%83explore-exploit-dilemma" aria-label="问题核心(Explore-exploit dilemma)">问题核心(Explore-exploit dilemma)</a></li>
                    <li>
                        <a href="#%e9%97%ae%e9%a2%98%e7%ae%97%e6%b3%95" aria-label="问题算法">问题算法</a><ul>
                            
                    <li>
                        <a href="#epsilon--greedy-action-selection" aria-label="$\epsilon$- greedy Action Selection">$\epsilon$- greedy Action Selection</a></li>
                    <li>
                        <a href="#upper-confidence-bound-ucb" aria-label="Upper Confidence Bound (UCB)">Upper Confidence Bound (UCB)</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#%e9%a9%ac%e5%b0%94%e5%8f%af%e5%a4%ab%e5%86%b3%e7%ad%96%e8%bf%87%e7%a8%8bmdps" aria-label="马尔可夫决策过程(MDPs)">马尔可夫决策过程(MDPs)</a><ul>
                            
                    <li>
                        <a href="#%e7%90%86%e8%ae%ba%e6%a1%86%e6%9e%b6" aria-label="理论框架">理论框架</a></li>
                    <li>
                        <a href="#%e6%a0%b8%e5%bf%83%e6%95%b0%e5%ad%a6%e6%a6%82%e5%bf%b5%e5%87%bd%e6%95%b0" aria-label="核心数学概念&amp;amp;函数">核心数学概念&amp;函数</a><ul>
                            
                    <li>
                        <a href="#policy" aria-label="Policy">Policy</a></li>
                    <li>
                        <a href="#returns" aria-label="Returns">Returns</a></li>
                    <li>
                        <a href="#value-functions" aria-label="Value Functions">Value Functions</a></li>
                    <li>
                        <a href="#bellman-equation" aria-label="Bellman Equation">Bellman Equation</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#%e5%8a%a8%e6%80%81%e8%a7%84%e5%88%92" aria-label="动态规划">动态规划</a><ul>
                            
                    <li>
                        <a href="#policy-iteration" aria-label="Policy Iteration">Policy Iteration</a><ul>
                            
                    <li>
                        <a href="#iterative-policy-evaluation" aria-label="Iterative policy evaluation">Iterative policy evaluation</a></li>
                    <li>
                        <a href="#policy-improvement" aria-label="Policy Improvement">Policy Improvement</a></li></ul>
                    </li>
                    <li>
                        <a href="#value-iteration" aria-label="Value Iteration">Value Iteration</a></li>
                    <li>
                        <a href="#asynchronous-and-generalised-dp" aria-label="Asynchronous and generalised DP">Asynchronous and generalised DP</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e8%92%99%e7%89%b9%e5%8d%a1%e6%b4%9b%e6%96%b9%e6%b3%95" aria-label="蒙特卡洛方法">蒙特卡洛方法</a>
                    </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>
  <div class="post-content"><h1 id="多臂老虎机问题mab">多臂老虎机问题(MAB)<a hidden class="anchor" aria-hidden="true" href="#多臂老虎机问题mab">#</a></h1>
<h2 id="问题定义">问题定义<a hidden class="anchor" aria-hidden="true" href="#问题定义">#</a></h2>
<h2 id="问题核心explore-exploit-dilemma">问题核心(Explore-exploit dilemma)<a hidden class="anchor" aria-hidden="true" href="#问题核心explore-exploit-dilemma">#</a></h2>
<h2 id="问题算法">问题算法<a hidden class="anchor" aria-hidden="true" href="#问题算法">#</a></h2>
<h3 id="epsilon--greedy-action-selection">$\epsilon$- greedy Action Selection<a hidden class="anchor" aria-hidden="true" href="#epsilon--greedy-action-selection">#</a></h3>
<h3 id="upper-confidence-bound-ucb">Upper Confidence Bound (UCB)<a hidden class="anchor" aria-hidden="true" href="#upper-confidence-bound-ucb">#</a></h3>
<h1 id="马尔可夫决策过程mdps">马尔可夫决策过程(MDPs)<a hidden class="anchor" aria-hidden="true" href="#马尔可夫决策过程mdps">#</a></h1>
<h2 id="理论框架">理论框架<a hidden class="anchor" aria-hidden="true" href="#理论框架">#</a></h2>
<h2 id="核心数学概念函数">核心数学概念&amp;函数<a hidden class="anchor" aria-hidden="true" href="#核心数学概念函数">#</a></h2>
<h3 id="policy">Policy<a hidden class="anchor" aria-hidden="true" href="#policy">#</a></h3>
<h3 id="returns">Returns<a hidden class="anchor" aria-hidden="true" href="#returns">#</a></h3>
<h3 id="value-functions">Value Functions<a hidden class="anchor" aria-hidden="true" href="#value-functions">#</a></h3>
<h3 id="bellman-equation">Bellman Equation<a hidden class="anchor" aria-hidden="true" href="#bellman-equation">#</a></h3>
<h1 id="动态规划">动态规划<a hidden class="anchor" aria-hidden="true" href="#动态规划">#</a></h1>
<h2 id="policy-iteration">Policy Iteration<a hidden class="anchor" aria-hidden="true" href="#policy-iteration">#</a></h2>
<h3 id="iterative-policy-evaluation">Iterative policy evaluation<a hidden class="anchor" aria-hidden="true" href="#iterative-policy-evaluation">#</a></h3>
<h3 id="policy-improvement">Policy Improvement<a hidden class="anchor" aria-hidden="true" href="#policy-improvement">#</a></h3>
<h2 id="value-iteration">Value Iteration<a hidden class="anchor" aria-hidden="true" href="#value-iteration">#</a></h2>
<h2 id="asynchronous-and-generalised-dp">Asynchronous and generalised DP<a hidden class="anchor" aria-hidden="true" href="#asynchronous-and-generalised-dp">#</a></h2>
<h1 id="蒙特卡洛方法">蒙特卡洛方法<a hidden class="anchor" aria-hidden="true" href="#蒙特卡洛方法">#</a></h1>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://martinspace.top/zh/tags/rl/">RL</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://martinspace.top/zh/nluplus/">
    <span class="title">« 上一页</span>
    <br>
    <span>从RNN到Transformers</span>
  </a>
  <a class="next" href="https://martinspace.top/zh/llamacpp-tutorial/">
    <span class="title">下一页 »</span>
    <br>
    <span>Llama.cpp本地CPU部署大模型</span>
  </a>
</nav>
<script src="https://utteranc.es/client.js"
        repo="oudushu/utterances"
        issue-term="title"
        theme="preferred-color-scheme"
        crossorigin="anonymous"
        async>
</script>



  </footer><script src="https://utteranc.es/client.js"
    repo="MartinRepo/utterancesInblog"
    issue-term="pathname"
    label="Comment"
    theme="preferred-color-scheme"
    crossorigin="anonymous"
    async>
</script>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2025 <a href="https://martinspace.top/zh/">Martin&#39;s space</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
        <br> 
        
        <a href="https://beian.miit.gov.cn" rel="noopener" target="_blank">辽 ICP 备 2022011010 号 -1</a>
    </span>
    
    <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv">
        被访问了<span id="busuanzi_value_site_pv"></span>次
    </span>
    <span id="busuanzi_container_site_uv">
        迎接了<span id="busuanzi_value_site_uv"></span>位客人
    </span>
    </div>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script></body>

</html>
